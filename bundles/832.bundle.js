"use strict";(self.webpackChunkjapnaa_github_io=self.webpackChunkjapnaa_github_io||[]).push([[832],{4889:(t,e,n)=>{n.d(e,{Z:()=>r});const r={longTextContainer:"longTextContainer__qPpRlcommon",flatButton:"flatButton__elqcEcommon"}},1832:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});const r="ProjectDirectory__QIzsWDirectory",o="hasProjectInfo__r6ubbDirectory",i="title__mL1YiDirectory",a="loading__Yf5SeDirectory";var c=n(4889),l=n(3735);var u=n(7275);var s,f=n(9707),h=n(7584),p=n(721),d=n(1951),y=n(1049),v=n(6780),g=(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const k=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.cssName=r,o.isFullPage=!0,o.elm=document.createElement("div"),o.container=o.createContainer(),o.title=o.createTitle(),o.pageContent=o.createPageContent(),o.linkProjectMatchMap=new Map,n.stateData?o.contentHref=o.getHrefFromState(n.stateData):o.contentHref=h.Z.path.thingy+h.Z.path.repo.thingy,o}return g(e,t),e.prototype.setup=function(){return b(this,void 0,void 0,(function(){return m(this,(function(e){return t.prototype.setup.call(this),this.loadContentHref(),this.elm.appendChild(this.container),this.addEventHandlers(),[2]}))}))},e.prototype.getState=function(){return this.cleanPath()},e.prototype.setState=function(t){return t&&this.changeContentToView(this.getHrefFromState(t)),!0},e.prototype.canScroll=function(){return!0},e.prototype.createContainer=function(){var t=document.createElement("div");return t.classList.add(c.Z.longTextContainer),t},e.prototype.createTitle=function(){var t=document.createElement("h1");return t.classList.add(i),t.innerText=e.defaultTitle,this.container.appendChild(t),t},e.prototype.createPageContent=function(){var t=document.createElement("div");return this.container.appendChild(t),t},e.prototype.addEventHandlers=function(){this.linkClickHandler=this.linkClickHandler.bind(this),this.container.addEventListener("click",this.linkClickHandler)},e.prototype.cleanPath=function(){var t=new URL(this.contentHref).pathname;return t?(t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t):""},e.prototype.getHrefFromState=function(t){return(0,y.Z)(t+"/",h.Z.path.thingy)},e.prototype.linkClickHandler=function(t){var e=function(t){if(!(t instanceof Element))return null;for(var e=t;;){if(!e)return null;if("A"===e.tagName&&"href"in e)return e.href;e=e.parentElement}}(t.target);if(e){var n=this.navigate(e);t.preventDefault(),n&&this.markAsLoading(t.target)}},e.prototype.markAsLoading=function(t){t.classList.add(a)},e.prototype.navigate=function(t){var e,n,r,o,i,a=new URL(t),c=a.hostname===location.hostname,l=this.getPathDepth(a.pathname);return c?l<=1?(this.changeContentToView(t),!0):(this.handleNavigateProjectLink(t),!1):((i=open(t,"_blank","width="+(e||innerWidth-64)+", height="+(n||innerHeight-64)+", left="+(r||screenLeft+32)+", top="+(o||screenTop+32)))&&(i.opener=null),!1)},e.prototype.handleNavigateProjectLink=function(t){var e=this.linkProjectMatchMap.get(t);e?this.openProjectView(e):(0,u.Z)(t)},e.prototype.getPathDepth=function(t){var e,n;if(!t)return 0;var r=t.split("/"),o=0;try{for(var i=w(r),a=i.next();!a.done;a=i.next()){a.value&&o++}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o},e.prototype.changeContentToView=function(t){this.contentHref=t,this.app.url.pushHistory(this),this.loadContentHref()},e.prototype.loadContentHref=function(){var t=this;p.Z.loadXML(this.contentHref,"text/html").onLoad((function(e){return t.setPageContent(e.data)})).onError((function(e){return location.replace(t.contentHref)}))},e.prototype.openProjectView=function(t){return b(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.app.views.switchAndInit("project/info",void 0,(function(e){return e.setProject(t.data,t.year,t.index)}))];case 1:return e.sent(),[2]}}))}))},e.prototype.setPageContent=function(t){var e=t.body.children[0].cloneNode(!0);(0,f.Z)(this.pageContent),this.pageContent.appendChild(e),this.setTitle(t.title),this.transformLinks(e),this.app.events.dispatchViewChange()},e.prototype.setTitle=function(t){this.title.innerText=t||e.defaultTitle},e.prototype.transformLinks=function(t){for(var e=t.getElementsByTagName("a"),n=function(t){var n=e[t],i=n.getAttribute("href");if(i){var a=(0,v.Z)(r.contentHref,i);n.href=a,r.mapLinkToProject(a).then((function(t){t&&n.classList.add(o)}))}},r=this,i=0;i<e.length;i++)n(i)},e.prototype.mapLinkToProject=function(t){var e=this,n=new URL(t).pathname,r=this.getPathDepth(n);return new Promise((function(n){2===r?e.findMatchingEntry(t).then((function(r){e.linkProjectMatchMap.set(t,r),n(Boolean(r))})):n(!1)}))},e.prototype.findMatchingEntry=function(t){return b(this,void 0,void 0,(function(){var e,n,r,o;return m(this,(function(i){switch(i.label){case 0:return(e=this.getYear(t))?[4,l.Z.getFileForYear(e)]:[2];case 1:if(!(n=i.sent().data))return[2];for(r=0;r<n.length;r++)if((o=n[r]).head.link&&(0,v.Z)(h.Z.path.thingy,o.head.link)===t)return[2,{year:parseInt(e),index:r,data:o}];return[2]}}))}))},e.prototype.getYear=function(t){var e=t.match(/Thingy_(\d+)/);return e?e[1]:null},e.defaultTitle="Project directory",e}(d.Z)},7275:(t,e,n)=>{n.d(e,{Z:()=>i});var r=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};function i(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){return(e=open(t,"_blank"))?(e.opener=null,[2]):(console.warn("Window could not be opened"),location.assign(t),[2])}))}))}},9707:(t,e,n)=>{function r(t){for(;t.firstChild;)t.removeChild(t.firstChild)}n.d(e,{Z:()=>r})}}]);