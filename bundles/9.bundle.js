(window.webpackJsonp=window.webpackJsonp||[]).push([[9,30],{11:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(7);function o(t,e){var i=t.getBoundingClientRect(),o=e||Object(n.a)(0,0,innerWidth,innerHeight);return i.top<o.height&&i.top+i.height>o.y&&i.left<o.width&&i.left+i.width>o.x}},126:function(t,e,i){"use strict";i.r(e);var n=i(79),o=i.n(n),r=i(8),s=i(5),h=i(7),a=function(){function t(){this.rect=Object(h.a)()}return t.prototype.init=function(t){var e=this.rect;this.rect=t,this.onAttach(e)},t}(),c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(t){var e,i,n=0;try{for(var o=c(t),r=o.next();!r.done;r=o.next()){var s=r.value;n+=Math.abs(s)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return n}var p,d=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=function(t){function e(e){var i=t.call(this)||this;return i.targetX=0,i.targetY=0,i.transitionSpeed=e,i.totalDiff=0,i}return d(e,t),e.prototype.moveTo=function(t,e){this.targetX=t,this.targetY=e},e.prototype.teleportTo=function(t,e){this.targetX=this.rect.x=t,this.targetY=this.rect.y=e},e.prototype.hasRectChanged=function(){return this.totalDiff>e.changedThreshold},e.prototype.tick=function(t){var e=this.targetX-this.rect.x,i=this.targetY-this.rect.y;this.rect.x+=e*this.transitionSpeed,this.rect.y+=i*this.transitionSpeed,this.totalDiff=u([e,i])},e.prototype.onDraw=function(){},e.prototype.onAttach=function(){this.targetX=this.rect.x,this.targetY=this.rect.y},e.changedThreshold=1e-4,e}(a),f=function(){function t(t,e,i,n){this.rect={x:t,y:e,width:i,height:n}}return t.prototype.draw=function(t){this.physics&&this.physics.onDraw()},t.prototype.tick=function(t){this.applyPhysics(t)},t.prototype.attachPhysics=function(t){this.physics=t,this.physics.init(this.rect)},t.prototype.getRect=function(){return this.rect},t.prototype.applyPhysics=function(t){this.physics&&this.physics.tick(t)},t}(),y=i(6),m=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.clickHandlers=new y.a,r}return m(e,t),e.prototype.tick=function(e){t.prototype.tick.call(this,e)},e.prototype.shouldRedraw=function(){return!!this.physics&&this.physics.hasRectChanged()},e.prototype.onClick=function(t){this.clickHandlers.add(t)},e.prototype.offClick=function(t){this.clickHandlers.remove(t)},e.prototype.checkClick=function(t,e){t>=this.rect.x&&e>=this.rect.y&&t<=this.rect.x+this.rect.width&&e<=this.rect.y+this.rect.height&&this.clickHandlers.dispatch()},e.prototype.draw=function(e){t.prototype.draw.call(this,e),e.fillStyle="#ff0000",e.fillRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},e}(f),v=i(3),w=i(18),b=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),H=function(t){function e(i){var n=t.call(this,0,0,e.width,e.height)||this;return n.imageViewImage=i,n.loadHanders=new y.a,n.image=s.a.loadImage(v.a.path.img.closeWhite).onLoad((function(){return n.loadHanders.dispatch()})).data,n.transitionProgress=0,n}return b(e,t),e.prototype.onLoad=function(t){this.loadHanders.add(t)},e.prototype.attachPhysics=function(e){t.prototype.attachPhysics.call(this,e)},e.prototype.draw=function(t){t.save(),v.a.isMobile||(t.shadowColor="rgba(0,0,0,0.35)",t.shadowBlur=8,t.shadowOffsetX=0,t.shadowOffsetY=0),t.globalCompositeOperation="difference",t.drawImage(this.image,this.rect.x,this.rect.y,this.rect.width,this.rect.height),t.restore()},e.prototype.shouldRedraw=function(){return 0!==this.transitionProgress&&1!==this.transitionProgress||t.prototype.shouldRedraw.call(this)},e.prototype.tick=function(i){t.prototype.tick.call(this,i);var n=this.imageViewImage.getRect();if(n&&this.physics){n.x-this.rect.width<0||n.y-this.rect.height<0?(this.transitionProgress-=i*e.transitionSpeed,this.transitionProgress<0&&(this.transitionProgress=0)):(this.transitionProgress+=i*e.transitionSpeed,this.transitionProgress>1&&(this.transitionProgress=1));var o=n.x-e.width,r=n.y-e.height,s=Object(w.a)(this.transitionProgress);this.physics.teleportTo(o*s,r*s)}},e.width=32,e.height=32,e.transitionSpeed=.005,e}(g),S=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x=function(t){function e(e,i,n){var o=this;if(!n.complete)throw new Error("Image not loaded.");return(o=t.call(this,e,i,n.width,n.height)||this).image=n,o}return S(e,t),e.prototype.draw=function(e){t.prototype.draw.call(this,e),e.drawImage(this.image,this.rect.x,this.rect.y,this.rect.width,this.rect.height)},e.prototype.shouldRedraw=function(){return!0},e}(f);function k(t,e){return{width:t||0,height:e||0}}var _=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T=function(t){function e(e){var i=t.call(this)||this;return i.transitionSpeed=e.transitionSpeed,i.initFlickSmoothing=e.initFlickSmoothing,i.flickFriction=e.flickFriction,i.imageDim=k(),i.bounds=k(),i.lastX=i.tx=0,i.lastY=i.ty=0,i.vx=0,i.vy=0,i.tscale=i.scale=1,i.dragging=!1,i.zooming=!1,i.userAdjusted=!1,i.isCurrRenderDirty=!0,i}return _(e,t),e.prototype.tick=function(t){var e=this.tx-this.rect.x,i=this.ty-this.rect.y,n=this.tscale-this.scale;this.constrainToBounds(),this.rect.x+=e*this.transitionSpeed,this.rect.y+=i*this.transitionSpeed,this.scale+=n*this.transitionSpeed,this.updateRectScale(),this.dragging?this.zooming||(this.vx=(this.rect.x-this.lastX)*(1-this.initFlickSmoothing)+this.vx*this.initFlickSmoothing,this.vy=(this.rect.y-this.lastY)*(1-this.initFlickSmoothing)+this.vy*this.initFlickSmoothing):(this.vx*=this.flickFriction,this.vy*=this.flickFriction,this.rect.x+=this.vx,this.rect.y+=this.vy,this.tx+=this.vx,this.ty+=this.vy),this.lastX=this.rect.x,this.lastY=this.rect.y},e.prototype.constrainToBounds=function(){var t=this.tscale*this.imageDim.width,i=this.tscale*this.imageDim.height;this.ty>this.bounds.height-e.padding?this.ty=this.bounds.height-e.padding:this.ty<e.padding-i&&(this.ty=e.padding+-i),this.tx>this.bounds.width-e.padding?this.tx=this.bounds.width-e.padding:this.tx<e.padding+-t&&(this.tx=e.padding+-t)},e.prototype.onDraw=function(){this.isCurrRenderDirty=!1},e.prototype.teleportTo=function(t,e){this.tx=this.rect.x=t,this.ty=this.rect.y=e},e.prototype.getScale=function(){return this.tscale},e.prototype.setScale=function(t){this.tscale=this.scale=t},e.prototype.resize=function(t,e){var i=this.bounds.width,n=this.bounds.height;this.bounds.width=t,this.bounds.height=e,this.userAdjusted?this.normalizeResize(i,n,t,e):this.resetImageTransform(),this.preventTransition()},e.prototype.hasRectChanged=function(){return this.isCurrRenderDirty||u([this.tx-this.rect.x,this.ty-this.rect.y,this.tscale-this.scale,this.vx,this.vy])>e.changeThreshold},e.prototype.zoomToScale=function(t,e,i){this.zoomInto(t/this.tscale,e,i)},e.prototype.zoomOutFrom=function(t,e,i){this.zoomInto(1/t,e,i)},e.prototype.zoomInto=function(t,e,i){this.tscale*=t,this.tx-=(e-this.tx)*(t-1),this.ty-=(i-this.ty)*(t-1),this.zooming=!0,this.userAdjusted=!0,this.isCurrRenderDirty=!0},e.prototype.dragIfDragging=function(t,e){this.dragging&&this.drag(t,e)},e.prototype.drag=function(t,e){this.tx+=t,this.ty+=e,this.rect.x+=t,this.rect.y+=e,this.userAdjusted=!0,this.isCurrRenderDirty=!0},e.prototype.startDrag=function(){this.zooming=!1,this.dragging=!0},e.prototype.endDrag=function(){this.zooming=!1,this.dragging=!1},e.prototype.resetImageTransform=function(){this.imageDim.width<=this.bounds.width&&this.imageDim.height<=this.bounds.height?this.tscale=1:this.tscale=Math.min(this.bounds.width/this.imageDim.width,this.bounds.height/this.imageDim.height),this.tx=(this.bounds.width-this.imageDim.width*this.tscale)/2,this.ty=(this.bounds.height-this.imageDim.height*this.tscale)/2,this.vx=0,this.vy=0,this.userAdjusted=!1,this.isCurrRenderDirty=!0},e.prototype.stopAnimations=function(){this.lastX=this.rect.x=this.tx,this.lastY=this.rect.y=this.ty,this.vx=0,this.vy=0,this.scale=this.tscale},e.prototype.onAttach=function(t){this.rect.x=t.x,this.rect.y=t.y,this.setImageSize(this.rect.width,this.rect.height),this.updateRectScale()},e.prototype.setImageSize=function(t,e){this.imageDim.width=t,this.imageDim.height=e,this.isCurrRenderDirty=!0},e.prototype.normalizeResize=function(t,e,i,n){if(this.rect){var o=(i-t)/2,r=(n-e)/2;this.rect.x+=o,this.rect.y+=r,this.tx+=o,this.ty+=r}},e.prototype.updateRectScale=function(){this.rect.width=this.imageDim.width*this.scale,this.rect.height=this.imageDim.height*this.scale},e.prototype.preventTransition=function(){this.rect.x=this.tx,this.rect.y=this.ty,this.scale=this.tscale},e.changeThreshold=1e-4,e.padding=16,e}(a),C=function(){function t(){this.physics=new T({transitionSpeed:.25,initFlickSmoothing:.3,flickFriction:.94}),this.didSkyrim=!1,this.skyrimHandlers=new y.a,this.animateNextReset=!1}return t.prototype.onSkyrim=function(t){this.skyrimHandlers.add(t)},t.prototype.offSkyrim=function(t){this.skyrimHandlers.remove(t)},t.prototype.setImage=function(t){this.image=new x(0,0,t),this.image.attachPhysics(this.physics)},t.prototype.tick=function(t){this.image&&this.image.tick(t)},t.prototype.draw=function(t){this.image&&(t.imageSmoothingEnabled=this.getScale()<3,this.getScale()>4e7&&this.startSkyrim(),t.save(),v.a.isMobile||(t.shadowColor="rgba(0,0,0,0.40)",t.shadowBlur=8,t.shadowOffsetX=0,t.shadowOffsetY=12),this.image.draw(t),t.restore())},t.prototype.setInitalTransform=function(t,e,i){this.physics.teleportTo(t,e),this.physics.setScale(i),this.animateNextReset=!0},t.prototype.zoom=function(e,i,n){this.physics&&(e>0?this.physics.zoomOutFrom(t.zoomFactor,i,n):this.physics.zoomInto(t.zoomFactor,i,n))},t.prototype.alternateFitToReal=function(t,e){this.physics.getScale()<1?this.physics.zoomToScale(1,t,e):this.physics.resetImageTransform()},t.prototype.resetImageTransform=function(){this.physics.resetImageTransform(),this.animateNextReset||(this.physics.stopAnimations(),this.animateNextReset=!0)},t.prototype.getRect=function(){return this.image&&this.image.getRect()},t.prototype.startSkyrim=function(){this.didSkyrim||(this.skyrimHandlers.dispatch(),this.didSkyrim=!0)},t.prototype.getScale=function(){return this.physics.getScale()},t.zoomFactor=1.2,t}(),I=i(23),D=i(19),z=i(55);function R(t,e){return Math.sqrt(t*t+e*e)}var O=function(){function t(t){this.elm=t,this.touchMap=new Map,this.singleTapped=!1,this.singleTapPos=Object(z.a)(),this.touchMoved=!1,this.moveHandlers=new y.a,this.startMoveHandlers=new y.a,this.endMoveHandlers=new y.a,this.zoomHandlers=new y.a,this.tapHandlers=new y.a,this.doubleTapHandlers=new y.a}return t.prototype.setup=function(){this.addEventHandlers()},t.prototype.destory=function(){this.removeEventHandlers()},t.prototype.onMove=function(t){this.moveHandlers.add(t)},t.prototype.onStartMove=function(t){this.startMoveHandlers.add(t)},t.prototype.onEndMove=function(t){this.endMoveHandlers.add(t)},t.prototype.onZoom=function(t){this.zoomHandlers.add(t)},t.prototype.onDoubleTap=function(t){this.doubleTapHandlers.add(t)},t.prototype.onTap=function(t){this.tapHandlers.add(t)},t.prototype.addEventHandlers=function(){this.touchStartHandler=this.touchStartHandler.bind(this),this.elm.addEventListener("touchstart",this.touchStartHandler),this.touchEndHandler=this.touchEndHandler.bind(this),this.elm.addEventListener("touchend",this.touchEndHandler.bind(this)),this.touchMoveHandler=this.touchMoveHandler.bind(this),this.elm.addEventListener("touchmove",this.touchMoveHandler.bind(this))},t.prototype.removeEventHandlers=function(){this.elm.removeEventListener("touchstart",this.touchStartHandler),this.elm.removeEventListener("touchend",this.touchEndHandler),this.elm.removeEventListener("touchmove",this.touchMoveHandler)},t.prototype.touchStartHandler=function(t){t.cancelable&&t.preventDefault(),0===this.touchMap.size&&(this.startMoveHandlers.dispatch(),this.touchMoved=!1);for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];this.touchMap.set(i.identifier,Object(z.a)(i.clientX,i.clientY))}},t.prototype.touchEndHandler=function(t){t.cancelable&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];this.touchMap.delete(i.identifier)}if(this.prevCenterX=void 0,this.prevCenterY=void 0,0===this.touchMap.size&&(this.endMoveHandlers.dispatch(),!this.touchMoved)){i=t.changedTouches[0];var n=Object(z.a)(i.clientX,i.clientY);this.singleTapped?(this.doubleTapHandlers.dispatch(n),this.singleTapped=!1):(this.singleTapPos=n,this.singleTapped=!0),this.tapHandlers.dispatch(n)}},t.prototype.touchMoveHandler=function(t){t.cancelable&&t.preventDefault();var e=!1;t.touches.length>=2&&(this.checkZoom(t.touches[0],t.touches[1]),e=!0);for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=this.touchMap.get(n.identifier);e||this.moveHandlers.dispatch(Object(z.a)(n.clientX-o.x,n.clientY-o.y)),this.touchMap.set(n.identifier,Object(z.a)(n.clientX,n.clientY))}this.touchMoved=!0},t.prototype.checkZoom=function(t,e){var i=this.touchMap.get(t.identifier),n=this.touchMap.get(e.identifier),o=R(t.clientX-e.clientX,t.clientY-e.clientY),r=R(i.x-n.x,i.y-n.y),s=(t.clientX+e.clientX)/2,h=(t.clientY+e.clientY)/2;if(this.zoomHandlers.dispatch([o/r,Object(z.a)(s,h)]),this.prevCenterX&&this.prevCenterY){var a=s-this.prevCenterX,c=h-this.prevCenterY;this.moveHandlers.dispatch(Object(z.a)(a,c))}this.prevCenterX=s,this.prevCenterY=h},t}(),E=i(27),M=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),P=function(t){function e(e,i){var n=t.call(this,e,e.width,e.height,!1)||this;return n.imageView=i,n.onResize((function(){return n.updateSize()})),n}return M(e,t),e.prototype.hasChanged=function(){return this.imageView.shouldRedraw()},e.prototype.tick=function(t){this.imageView.tick(t)},e.prototype.draw=function(t){t.clearRect(0,0,this.width,this.height),this.imageView.draw(t)},e.prototype.getNewSize=function(){return[this.app.width,this.app.height]},e.prototype.isVisible=function(){return!0},e}(E.a),j=i(35),X=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Y=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{a(n.next(t))}catch(t){r(t)}}function h(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,h)}a((n=n.apply(t,e||[])).next())}))},L=function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}},F=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},A=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.cssName=o.a.ImageView,n.isFullPage=!1,n.elm=document.createElement("div"),n.renderer=new P(e,n),n.image=new C,n.closeButton=new H(n.image),n.closeButtonPhysics=new l(.2),n.closeButton.attachPhysics(n.closeButtonPhysics),n.touchControls=new O(n.elm),n.src=i.stateData,n.fromDirectURL=void 0!==i.directURL,n.inErrorState=!1,n}return X(e,t),e.prototype.setup=function(){return Y(this,void 0,void 0,(function(){return L(this,(function(e){return t.prototype.setup.call(this),this.renderer.appendTo(this.elm),this.addEventHandlers(),this.resizeHandler(),this.touchControls.setup(),this.src&&this.setImageSrc(this.src),[2]}))}))},e.prototype.destory=function(){return Y(this,void 0,void 0,(function(){return L(this,(function(i){switch(i.label){case 0:return t.prototype.destory.call(this),this.touchControls.destory(),this.renderer.destory(),this.elm.classList.add(o.a.destory),[4,Object(I.a)(e.destorySpeed)];case 1:return i.sent(),[2]}}))}))},e.prototype.setImageSrc=function(t){var e=this;s.a.loadImage(t).onLoad((function(t){return e.setImage(t.data)})).onError((function(){return e.inErrorState=!0}))},e.prototype.setInitalTransform=function(t,e,i){this.image.setInitalTransform(t,e,i)},e.prototype.transitionIn=function(){Object(D.a)(o.a,this.elm,e.transitionInSpeed)},e.prototype.setImage=function(t){t.complete?(this.image.setImage(t),this.resetImagePosition()):this.inErrorState=!0},e.prototype.tick=function(t){this.closeButton.tick(t),this.image.tick(t)},e.prototype.draw=function(t){this.inErrorState?this.drawErrorMessage(t):this.image.draw(t),this.closeButton.draw(t),this.renderer.resetTransform()},e.prototype.drawErrorMessage=function(t){var e=this.closeButton.getRect();t.save(),t.translate(this.renderer.width/2,this.renderer.height/2),t.fillStyle="#000000",t.strokeStyle="#ff0000",t.rect(-128,-32,256,64),t.fill(),t.lineWidth=3,t.stroke(),t.fillStyle="#ff3030",t.font="18px 'Roboto', sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText("Failed to load image",0,2),t.restore(),this.closeButtonPhysics.teleportTo((this.renderer.width-256)/2-e.width,(this.renderer.height-64)/2-e.height)},e.prototype.shouldRedraw=function(){return!this.inErrorState&&this.image.physics.hasRectChanged()||this.closeButton.shouldRedraw()},e.prototype.addEventHandlers=function(){var t=this;this.renderer.onResize(this.resizeHandler.bind(this)),this.events.onKeydown(this.keyDownHandler.bind(this)),this.closeButton.onClick(this.closeButtonClickHandler.bind(this)),this.elm.addEventListener("wheel",this.wheelHandler.bind(this),{passive:!1}),this.elm.addEventListener("dblclick",this.doubleClickHandler.bind(this)),this.elm.addEventListener("mousedown",this.mouseDownHandler.bind(this)),this.elm.addEventListener("mouseup",this.mouseUpHandler.bind(this)),this.elm.addEventListener("mousemove",this.mouseMoveHandler.bind(this)),this.elm.addEventListener("click",this.clickHandler.bind(this)),this.closeButton.onLoad((function(){return t.renderer.requestDraw()})),this.touchControls.onTap(this.tapHandler.bind(this)),this.touchControls.onStartMove(this.startMoveHandler.bind(this)),this.touchControls.onMove(this.moveHandler.bind(this)),this.touchControls.onEndMove(this.endMoveHandler.bind(this)),this.touchControls.onZoom(this.zoomHandler.bind(this)),this.touchControls.onDoubleTap(this.doubleTapHandler.bind(this)),this.image.onSkyrim(this.skyrimHandler.bind(this))},e.prototype.resizeHandler=function(){this.image.physics.resize(this.app.width,this.app.height)},e.prototype.wheelHandler=function(t){t.preventDefault(),this.image.zoom(t.deltaY,t.offsetX,t.offsetY),this.renderer.drawIfShould()},e.prototype.zoomHandler=function(t){var e=F(t,2),i=e[0],n=e[1];this.image.physics.zoomInto(i,n.x,n.y),this.renderer.drawIfShould()},e.prototype.doubleClickHandler=function(t){t.preventDefault(),this.image.alternateFitToReal(t.offsetX,t.offsetY),this.renderer.drawIfShould()},e.prototype.doubleTapHandler=function(t){this.image.alternateFitToReal(t.x,t.y),this.renderer.drawIfShould()},e.prototype.mouseMoveHandler=function(t){this.image.physics.dragIfDragging(t.movementX,t.movementY),this.renderer.drawIfShould()},e.prototype.moveHandler=function(t){this.image.physics.drag(t.x,t.y),this.renderer.drawIfShould()},e.prototype.clickHandler=function(t){t.preventDefault(),this.closeButton.checkClick(t.offsetX,t.offsetY),this.renderer.drawIfShould()},e.prototype.tapHandler=function(t){this.closeButton.checkClick(t.x,t.y)},e.prototype.mouseDownHandler=function(t){t.preventDefault(),this.image.physics.startDrag(),this.renderer.drawIfShould()},e.prototype.startMoveHandler=function(){this.image.physics.startDrag()},e.prototype.mouseUpHandler=function(t){t.preventDefault(),this.image.physics.endDrag(),this.renderer.drawIfShould()},e.prototype.endMoveHandler=function(){this.image.physics.endDrag()},e.prototype.closeButtonClickHandler=function(){this.fromDirectURL?(history.back(),window.close()):this.app.views.close(this)},e.prototype.keyDownHandler=function(t){48===t.keyCode&&this.resetImagePosition()},e.prototype.resetImagePosition=function(){this.image.resetImageTransform(),this.renderer.requestDraw()},e.prototype.skyrimHandler=function(){return Y(this,void 0,void 0,(function(){var t,e;return L(this,(function(i){return(t=document.createElement("div")).classList.add(o.a.iframeContainer),(e=new j.default("https://www.youtube-nocookie.com/embed/RrjJtYpOawU?start=61&autoplay=1&mute=1&controls=0&disablekb=1")).setup(),e.appendTo(t),this.elm.appendChild(t),[2]}))}))},e.destorySpeed=500,e.transitionInSpeed=500,e}(r.a);e.default=A},18:function(t,e,i){"use strict";function n(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return s}));var o=Math.pow(2,-10);function r(t){return 1-Math.pow(2,-10*t)+o}function s(t){return((t*=2)<=1?Math.pow(2,10*t-10)-o:2-Math.pow(2,10-10*t)+o)/2}},19:function(t,e,i){"use strict";function n(t,e,i){return e.classList.add(t.beforeTransitionIn),requestAnimationFrame((function(){return requestAnimationFrame((function(){return e.classList.add(t.afterTransitionIn)}))})),new Promise((function(n){setTimeout((function(){e.classList.remove(t.beforeTransitionIn),e.classList.remove(t.afterTransitionIn),n()}),i)}))}i.d(e,"a",(function(){return n}))},26:function(t,e,i){t.exports={iframe:"iframe__3oU6diframe"}},27:function(t,e,i){"use strict";var n=i(6),o=i(11),r=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},s=function(){function t(t,e,i,o){this.canvas=document.createElement("canvas"),this.app=t;var s=this.canvas.getContext("2d",{alpha:!o});if(!s)throw new Error("Canvas not supported");if(this.X=s,e&&i)this.width=e,this.height=i;else{var h=r(this.getNewSize(),2),a=h[0],c=h[1];this.width=a,this.height=c}this.dpr=window.devicePixelRatio||1,this.updateCanvasSize(),this.then=performance.now(),this.reqnafHandle=-1,this.forceNextRedraw=!1,this.isDrawing=!1,this.resizeHandlers=new n.a,this.setup()}return t.prototype.appendTo=function(t){t.appendChild(this.canvas)},t.prototype.destory=function(){cancelAnimationFrame(this.reqnafHandle),this.app.events.offResize(this.resizeHandler)},t.prototype.requestDraw=function(){this.isDrawing?this.forceNextRedraw=!0:this.reqanfHandler(performance.now())},t.prototype.drawIfShould=function(){this.checkShouldRedraw()&&this.requestDraw()},t.prototype.updateSize=function(){var t=r(this.getNewSize(),2),e=t[0],i=t[1];this.width=e,this.height=i,this.updateCanvasSize(),this.requestDraw()},t.prototype.clearTimer=function(){this.then=performance.now()},t.prototype.getContext=function(){return this.X},t.prototype.onResize=function(t){this.resizeHandlers.add(t)},t.prototype.offResize=function(t){this.resizeHandlers.remove(t)},t.prototype.resetTransform=function(){this.X.resetTransform(),this.X.scale(this.dpr,this.dpr)},t.prototype.isVisible=function(){return Object(o.a)(this.canvas)},t.prototype.setup=function(){this.resizeHandler=this.resizeHandler.bind(this),this.app.events.onResize(this.resizeHandler)},t.prototype.resizeHandler=function(){this.resizeHandlers.dispatch()},t.prototype.reqanfHandler=function(t){var e=this,i=t-this.then;this.then=t,this.isDrawing=!0,this.tick(i),this.draw(this.X);var n=this.checkShouldRedraw();n&&(this.reqnafHandle=requestAnimationFrame((function(t){return e.reqanfHandler(t)}))),this.isDrawing=n},t.prototype.checkShouldRedraw=function(){return this.forceNextRedraw?(this.forceNextRedraw=!1,!0):this.isVisible()&&this.hasChanged()},t.prototype.updateCanvasSize=function(){this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",1!==this.dpr&&this.resetTransform()},t}();e.a=s},35:function(t,e,i){"use strict";i.r(e);var n,o=i(26),r=i.n(o),s=i(4),h=i(6),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function e(e){var i=t.call(this)||this;return i.cssName=r.a.iframe,i.elm=document.createElement("iframe"),i.eventHandlers=new h.a,i.setSrc(e),i.addEventHandlers(),i}return a(e,t),e.prototype.setSrc=function(t){this.elm.src=t},e.prototype.focus=function(){this.elm.focus()},e.prototype.close=function(){this.elm.parentElement&&this.elm.parentElement.removeChild(this.elm)},e.prototype.tryClose=function(){this.elm.src="about:blank"},e.prototype.isClosed=function(){try{return Boolean(this.elm.contentWindow&&"about:blank"===this.elm.contentWindow.location.href)}catch(t){if(t instanceof DOMException&&t.code===t.SECURITY_ERR)return!1;throw t}},e.prototype.onClose=function(t){this.eventHandlers.add(t)},e.prototype.offClose=function(t){this.eventHandlers.remove(t)},e.prototype.addEventHandlers=function(){var t=this;this.elm.addEventListener("load",(function(){t.isClosed()&&t.eventHandlers.dispatch()}))},e}(s.a);e.default=c},7:function(t,e,i){"use strict";function n(t,e,i,n){return{x:t||0,y:e||0,width:i||0,height:n||0}}i.d(e,"a",(function(){return n}))},79:function(t,e,i){t.exports={ImageView:"ImageView__2bGirImageView",beforeTransitionIn:"beforeTransitionIn__2nuxiImageView",afterTransitionIn:"afterTransitionIn__1gwpLImageView",destory:"destory__1TDC8ImageView",iframeContainer:"iframeContainer__3hTKeImageView"}}}]);