(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{12:function(t,e,n){"use strict";function r(t){for(;t.firstChild;)t.removeChild(t.firstChild)}n.d(e,"a",(function(){return r}))},22:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(16),i=n(17),o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function s(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(o){return e=Object(r.a)(Object(i.a)("FrameView",t)),(n=open(e,"_blank"))?(n.opener=null,[2]):(console.warn("Window could not be opened"),location.assign(e),[2])}))}))}},25:function(t,e,n){"use strict";function r(t){var e=open(t,"_blank");return e&&(e.opener=null),e}n.d(e,"a",(function(){return r}))},59:function(t,e,n){"use strict";n.r(e);var r,i=n(73),o=n.n(i),a=n(4),s=n(74),l=n.n(s),u=n(24),c=n.n(u),p=n(75),h=n.n(p),f=function(){function t(){}return t.prototype.pushHistory=function(){},t.prototype.updateViewIfIsCurrent=function(){},t.prototype.update=function(){},t}(),d=n(60),y=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},w=function(t){function e(e,n){var r=t.call(this,e)||this;return r.title="embededApp",r.parentApp=e,r.parentElm=n,r.routes=e.routes,r.mainElm.classList.add(h.a.embededApp),r.url=new f,r}return y(e,t),e.prototype.setup=function(){return v(this,void 0,void 0,(function(){return m(this,(function(e){return t.prototype.setup.call(this),this.addEventHandlers(),this.parentElm.appendChild(this.mainElm),this.resizeNextFrame(),[2]}))}))},e.prototype.destory=function(){return v(this,void 0,void 0,(function(){return m(this,(function(t){return this.parentApp.events.offResize(this.resizeHandler),[2]}))}))},e.prototype.addEventHandlers=function(){this.resizeHandler=this.resizeHandler.bind(this),this.parentApp.events.onResize(this.resizeHandler),this.mainElm.addEventListener("keydown",this.keydownHandler.bind(this)),this.mainElm.addEventListener("mouseover",this.mouseoverHandler.bind(this))},e.prototype.resizeNextFrame=function(){var t=this;requestAnimationFrame((function(){return t.resizeHandler()}))},e.prototype.resizeHandler=function(){this.width=this.mainElm.clientWidth,this.height=this.mainElm.clientHeight,this.events.dispatchResize()},e.prototype.keydownHandler=function(t){t.stopPropagation(),this.events.dispatchKeydown(t)},e.prototype.mouseoverHandler=function(){this.focus()},e}(d.a);function b(t){return[].slice.call(t)}var g=n(22),E=n(25),k=n(42),x=n(12),H=n(9),_=n(3),L=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},S=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},A=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},O=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(W(arguments[e]));return t},T=function(){function t(t,e){this.app=t,this.hasErrors=!1,this.embededApps=[],this.widgets=[],this.styleElms=[],this.elm=this.parseHTML(e),this.elm.classList.add(l.a.htmlParsed)}return t.prototype.appendTo=function(t){t.appendChild(this.elm)},t.prototype.ready=function(){return this.replaceElementsPromise?this.replaceElementsPromise:Promise.resolve()},t.prototype.destory=function(){return L(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,l,u,c,p,h,f,d;return S(this,(function(y){switch(y.label){case 0:t=[];try{for(e=A(this.embededApps),n=e.next();!n.done;n=e.next())r=n.value,t.push(r.destory())}catch(t){u={error:t}}finally{try{n&&!n.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}try{for(i=A(this.widgets),o=i.next();!o.done;o=i.next())o.value.destory()}catch(t){p={error:t}}finally{try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(p)throw p.error}}try{for(a=A(this.styleElms),s=a.next();!s.done;s=a.next())l=s.value,document.head.removeChild(l)}catch(t){f={error:t}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(f)throw f.error}}return[4,Promise.all(t)];case 1:return y.sent(),[2]}}))}))},t.prototype.runScripts=function(){for(var t=this.elm.getElementsByTagName("script"),e=this.getElementIdMap(),n=0;n<t.length;n++){var r=t[n];try{new Function("div","id","SiteConfig",r.innerHTML)(this.elm,e,_.a)}catch(t){console.error(t),this.hasErrors=!0}}this.hasErrors&&this.createScriptErrorWarning()},t.prototype.moveStyleElementsToHead=function(){var t,e,n=b(this.elm.getElementsByTagName("style"));try{for(var r=A(n),i=r.next();!i.done;i=r.next()){var o=i.value;document.head.appendChild(o),this.styleElms.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setLinkHandlingMethod=function(t){var e=this;this.linkHandlingOptions=t;for(var n=this.elm.getElementsByTagName("a"),r=function(t){var r=n[t],i=r.getAttribute("href");if(!i)return"continue";r.href=Object(H.a)(i),r.addEventListener("click",(function(t){return e.anchorClickHandler(r,t)}))},i=0;i<n.length;i++)r(i)},t.prototype.replaceElements=function(){for(var t=this.elm.getElementsByTagName("*"),e=[],n=0;n<t.length;n++){var r=t[n],i=r.tagName.toLowerCase();if(i.startsWith("japnaa:")){var o=i.slice("japnaa:".length);o.startsWith("view:")?e.push(this.replaceViewElement(r,o.slice("view:".length))):o.startsWith("widget:")&&e.push(this.replaceWidgetElement(r,o.slice("widget:".length)))}}this.replaceElementsPromise=Promise.all(e)},t.prototype.createScriptErrorWarning=function(){var t=document.createElement("div");t.classList.add(l.a.scriptErrorWarning),t.innerText="Some scripts failed to run. Expect limited functionality.",this.elm.insertBefore(t,this.elm.firstChild)},t.prototype.anchorClickHandler=function(t,e){if(e.cancelable&&this.linkHandlingOptions){e.preventDefault();var n=t.href,r=c.a.parse(n);if(r.host===location.host){var i=Object(k.a)(r);if(i)this.linkHandlingOptions.openViewsWithLinks?this.app.views.switchAndInit(i.viewPath,i):this.openLink(n);else this.openLink(n)}else this.linkHandlingOptions.dontLeavePage?Object(E.a)(n):location.assign(n)}},t.prototype.openLink=function(t){this.linkHandlingOptions&&(this.linkHandlingOptions.openFrameViewWithLinks?Object(g.a)(t):this.linkHandlingOptions.dontLeavePage?Object(E.a)(t):location.assign(t))},t.prototype.parseHTML=function(t){var e=document.createElement("div");return e.innerHTML=t,e},t.prototype.getElementIdMap=function(){for(var t=this.elm.querySelectorAll("[id]"),e=new Map,n=0;n<t.length;n++){var r=t[n];e.set(r.id,r)}return e},t.prototype.replaceViewElement=function(t,e){return L(this,void 0,void 0,(function(){var n,r;return S(this,(function(i){return t.classList.add(l.a.embededView),n=new w(this.app,t),r=t.getAttribute("statedata"),n.setup(),n.views.open(e,r||void 0),t.classList.add(l.a.loaded),this.embededApps.push(n),[2]}))}))},t.prototype.replaceWidgetElement=function(t,e){return L(this,void 0,void 0,(function(){var n,r;return S(this,(function(i){switch(i.label){case 0:return t.classList.add(l.a.embededWidget),[4,this.app.routes.getWidget(e)];case 1:return n=i.sent(),(r=new(n.bind.apply(n,O([void 0],this.getWidgetArguments(t))))).appendTo(t),r.setup(),this.widgets.push(r),t.classList.add(l.a.loaded),[2]}}))}))},t.prototype.getWidgetArguments=function(t){var e,n,r=t.getAttribute("args"),i=t.getAttribute("app-arg"),o=t.getAttribute("children-arg"),a=[];if(null!==i&&a.push(this.app),null!==o&&(a.push(b(t.children)),Object(x.a)(t)),!r)return a;try{var s=JSON.parse("["+r+"]");try{for(var l=A(s),u=l.next();!u.done;u=l.next()){var c=u.value;a.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return a}catch(t){return a.push(r),a}},t}(),P=function(){function t(t,e){void 0===e&&(e={}),this.app=t,this.options=e}return t.prototype.parse=function(t){var e=t;this.options.inlineJS&&(e=this.runInlineJS(e));var n=new T(this.app,e);return this.options.scripts&&n.runScripts(),n.moveStyleElementsToHead(),n.setLinkHandlingMethod(this.options),n.replaceElements(),n},t.prototype.runInlineJS=function(e){return e.replace(t.inlineJSMatcher,(function(t,e){var n;try{n=new Function(e)()}catch(t){console.error(t),n="[Inline JS Error]"}return void 0===n?"":n.toString()}))},t.inlineJSMatcher=/\${{([^]+?)}}/g,t}(),V=n(5),M={inlineJS:!0,scripts:!0,dontLeavePage:!0,openViewsWithLinks:!0,openFrameViewWithLinks:!1},j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},F=function(t){function e(e,n){var r=t.call(this)||this;return r.cssName=o.a.HTMLView,r.parser=new P(e,n||M),r.elm=document.createElement("div"),r}return j(e,t),e.prototype.setUrl=function(t){this.url=t},e.prototype.setSource=function(t){this.source=t},e.prototype.setup=function(){return C(this,void 0,void 0,(function(){var e,n=this;return z(this,(function(r){switch(r.label){case 0:if(t.prototype.setup.call(this),this.source)e=this.write(this.source);else{if(!this.url)throw new Error("A url or source was not given");e=this.loadAndWriteWithURL(this.url)}return e.catch((function(t){return n.writeError(t)})),[4,e];case 1:return r.sent(),[2]}}))}))},e.prototype.destory=function(){return C(this,void 0,void 0,(function(){return z(this,(function(e){switch(e.label){case 0:return t.prototype.destory.call(this),this.doc?[4,this.doc.destory()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.loadAndWriteWithURL=function(t){return C(this,void 0,void 0,(function(){var e;return z(this,(function(n){switch(n.label){case 0:return[4,V.a.loadTextPromise(t)];case 1:return e=n.sent(),[4,this.write(e)];case 2:return n.sent(),[2]}}))}))},e.prototype.write=function(t){return C(this,void 0,void 0,(function(){return z(this,(function(e){switch(e.label){case 0:return this.doc=this.parser.parse(t),this.doc.appendTo(this.elm),[4,this.doc.ready()];case 1:return e.sent(),[2]}}))}))},e.prototype.writeError=function(t){console.error(t),this.elm.classList.add(o.a.loadError),this.elm.appendChild(document.createTextNode("Failed to load. Reason: "+t.message))},e}(a.a);e.default=F},73:function(t,e,n){t.exports={HTMLView:"HTMLView__3uEYdHTMLView",loadError:"loadError__QU53GHTMLView"}},74:function(t,e,n){t.exports={htmlParsed:"htmlParsed__33eFVhtmlViewDocument",scriptErrorWarning:"scriptErrorWarning__1V19FhtmlViewDocument",embededView:"embededView__3PO1khtmlViewDocument",embededWidget:"embededWidget__3qyMRhtmlViewDocument",loaded:"loaded__1hhIHhtmlViewDocument"}},75:function(t,e,n){t.exports={embededApp:"embededApp__1EpUsembededApp",main:"main__2P84HembededApp",view:"view__2rGdWembededApp"}}}]);