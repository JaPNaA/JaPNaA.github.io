/*! For license information please see 169.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkjapnaa_github_io=self.webpackChunkjapnaa_github_io||[]).push([[169],{4423:(t,e,n)=>{n.d(e,{Z:()=>r});const r={notMobile:"notMobile__qkjSuindex",mobile:"mobile__zYm6Eindex",main:"main__qUqh9index",view:"view__AvkY4index",widget:"widget__MUdT2index"}},3169:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var r=n(4423),o=n(7104),i=n(3735),s=n(721),a=n(5630),c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const l=function(){function t(){this.restored=!1,this._canRestore=!1}return t.prototype.fromURL=function(t,e,n){return c(this,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return(r=(0,a.Z)(e))?(r.directURL=e,[4,this.view(t,n||r)]):[2];case 1:return o.sent(),[2]}}))}))},t.prototype.view=function(t,e){return c(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return(n=void 0!==e.id&&t.views.getById(e.id))&&n.viewPath===e.viewPath&&n.setState(e.stateData)?(t.views.closeAllViewsExcept(n),[3,3]):[3,1];case 1:return[4,t.views.switchAndInit(e.viewPath,e)];case 2:r.sent(),r.label=3;case 3:return this.restored=!0,[2]}}))}))},t}();var h=n(5034);const p=function(){function t(){this.restore=new l,this.siteTitle=document.title,this.currentURL=location.href,this.stateEmpty=!0,this.initalSearch=location.search,this.initalHash=location.hash,this.initalURL=location.href,this.initalState=history.state,this.setToOldURL()}return t.prototype.restoreFromRedirect=function(t){var e=void 0;try{e=JSON.parse(this.initalState)}catch(t){console.warn("Failed to get state",t)}return this.restore.fromURL(t,this.initalURL,e)},t.prototype.setTitle=function(t){this.siteTitle=t},t.prototype.setState=function(t){var e=this.getTitleAndURLFromState(t),n=e.title,r=e.url;this.basedReplaceState(JSON.stringify(t),n,r),this.currentURL=r,document.title=n,this.stateEmpty=!1},t.prototype.pushState=function(t){if(this.stateEmpty)return this.setState(t);var e=this.getTitleAndURLFromState(t),n=e.title,r=e.url;this.basedPushState(JSON.stringify(t),n,r),this.currentURL=r,document.title=n},t.prototype.clearState=function(){this.basedReplaceState(null,this.siteTitle,"/"),this.currentURL="/"},t.prototype.getTitleAndURLFromState=function(t){return{title:(t.viewTitle?t.viewTitle+" in ":"")+this.siteTitle+(t.viewPath?"."+t.viewPath.replace(/\//g,"."):""),url:(0,h.Z)(t)}},t.prototype.setToOldURL=function(){var t=new URLSearchParams(this.initalSearch),e=t.get("u"),n=t.get("s");n&&(this.initalState=n),"1"===t.get("fromredirect")&&e?(this.initalURL=e,this.restore._canRestore=!0,history.replaceState(n,this.siteTitle,e)):this.initalHash&&(this.restore._canRestore=!0,history.replaceState(n,this.siteTitle,"/"+this.initalHash))},t.prototype.basedReplaceState=function(t,e,n){history.replaceState(t,e,n)},t.prototype.basedPushState=function(t,e,n){history.pushState(t,e,n)},t}();const f=function(){function t(){this.history=[]}return t.prototype.push=function(e){if(!this.hasID(e))throw new Error("Cannot use AppState without ID");this.history.push(e),this.history.length>t.maxLength&&this.history.shift()},t.prototype.find=function(t){return this.hasID(t)?this.findWithID(t):this.findWithoutID(t)},t.prototype.findByID=function(t){for(var e=this.history.length-1;e>=0;e--)if(this.history[e].id===t)return this.history[e]},t.prototype.findWithID=function(t){for(var e=this.history.length-1;e>=0;e--)if(this.history[e].id===t.id&&this.history[e].viewPath.toLowerCase()===t.viewPath.toLowerCase()&&this.history[e].stateData===t.stateData)return this.history[e]},t.prototype.findWithoutID=function(t){for(var e=this.history.length-1;e>=0;e--)if(this.history[e].viewPath.toLowerCase()===t.viewPath.toLowerCase()&&this.history[e].stateData===t.stateData)return this.history[e]},t.prototype.hasID=function(t){return void 0!==t.id},t.maxLength=100,t}();var d=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},y=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const v=function(){function t(t,e){this.restored=!1,this.app=t,this.appEvents=e,this.controller=new p,this.history=new f,this.frozen=!1,this.attachEventHandlers()}return t.prototype.setTitle=function(t){this.controller.setTitle(t)},t.prototype.restoreIfShould=function(){return d(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.controller.restoreFromRedirect(this.app)];case 1:return t.sent(),this.restored=this.controller.restore.restored,[2]}}))}))},t.prototype.pushHistory=function(t){var e=this.createAppState(t);this.currView&&this.currView!==t&&this.updateViewIfIsCurrent(this.currView),this.history.push(e),this.pushState(e),this.currView=t},t.prototype.updateViewIfIsCurrent=function(t){t===this.currView&&this.updateView(t)},t.prototype.update=function(){var t=this.app.views.topFull();t&&this.updateView(t)},t.prototype.updateView=function(t){var e=this.history.findByID(t.id),n=this.createAppState(t);if(!e)throw new Error("Cannot update state with unregistered view");this.setURLState(n),e.stateData=n.stateData,e.privateData=n.privateData},t.prototype.attachEventHandlers=function(){this.topFulViewChangeHandler=this.topFulViewChangeHandler.bind(this),this.appEvents.onTopFullViewChange(this.topFulViewChangeHandler),this.popStateHandler=this.popStateHandler.bind(this),addEventListener("popstate",this.popStateHandler)},t.prototype.topFulViewChangeHandler=function(){this.update()},t.prototype.popStateHandler=function(t){return d(this,void 0,void 0,(function(){var e,n;return y(this,(function(r){switch(r.label){case 0:return e=location.href,(0,a.Z)(e)?(n=t.state&&JSON.parse(t.state),this.frozen=!0,this.controller.currentURL=e,n?[4,this.controller.restore.view(this.app,n)]:[3,2]):(console.warn("URL has no state"),[2]);case 1:return r.sent(),[3,4];case 2:return[4,this.controller.restore.fromURL(this.app,e)];case 3:r.sent(),r.label=4;case 4:return this.frozen=!1,[2]}}))}))},t.prototype.setURLState=function(t){this.frozen||this.controller.setState(t)},t.prototype.pushState=function(t){this.frozen||this.controller.pushState(t)},t.prototype.createAppState=function(t){return{viewPath:t.viewPath,stateData:t.getState(),viewTitle:t.getTitle(),directURL:this.controller.currentURL,id:t.id,privateData:t.getPrivateData()}},t}();var w=n(4443),g=n(7433),m=n(1531),b=n(7584),x=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function S(){return[innerWidth,innerHeight]}const k=function(){function t(t){this.sizeGetter=t||S;var e=x(this.sizeGetter(),2),n=e[0],r=e[1];this.width=n,this.height=r,this.resizePollsLeft=0,this.resizesLeft=0,this.isWatchingForResize=!1,this.resizeHandlers=new g.Z,this.setup()}return t.prototype.destory=function(){removeEventListener("resize",this.resizeHandler)},t.prototype.resizeOrWatch=function(){if(b.Z.isIOS)this.watchForResize();else{var t=x(this.sizeGetter(),2),e=t[0],n=t[1];this.resize(e,n)}},t.prototype.onResize=function(t){this.resizeHandlers.add(t)},t.prototype.offResize=function(t){this.resizeHandlers.remove(t)},t.prototype.setup=function(){this.resizeHandler=this.resizeHandler.bind(this),addEventListener("resize",this.resizeHandler)},t.prototype.resizeHandler=function(){this.resizeOrWatch()},t.prototype.resize=function(t,e){this.width=t,this.height=e,this.resizeHandlers.dispatch((0,m.J)(t,e))},t.prototype.didResize=function(){var t=x(this.sizeGetter(),2),e=t[0],n=t[1];return e!==this.width||n!==this.height},t.prototype.watchForResize=function(){this.resizePollsLeft=t.resizeWatchTTL,this.resizesLeft=t.resizesAfterResize,this.isWatchingForResize||this.resizeWatchLoop()},t.prototype.resizeWatchLoop=function(){var t=this;if(this.resizePollsLeft--,this.isWatchingForResize=!0,this.didResize()||this.resizePollsLeft<=0){var e=x(this.sizeGetter(),2),n=e[0],r=e[1];if(this.resize(n,r),this.resizesLeft--,this.resizesLeft<=0)return void(this.isWatchingForResize=!1)}requestAnimationFrame((function(){return t.resizeWatchLoop()}))},t.resizeWatchTTL=120,t.resizesAfterResize=2,t}();var H,L=(H=function(t,e){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},H(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},C=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const T=function(t){function e(){var e=t.call(this)||this;return e.autoRestoreState=!0,e.url=new v(e,e.events),e.resizeWatcher=new k,e}return L(e,t),e.prototype.setup=function(){return E(this,void 0,void 0,(function(){return C(this,(function(e){return t.prototype.setup.call(this),this.addEventHandlers(),this.createSplashScreen(),this.restoreState(),this.url.setTitle(this.title),document.body.appendChild(this.mainElm),[2]}))}))},e.prototype.destory=function(){return E(this,void 0,void 0,(function(){return C(this,(function(t){return this.resizeWatcher.offResize(this.resizeHandler),removeEventListener("keydown",this.keydownHandler),this.resizeWatcher.destory(),[2]}))}))},e.prototype.addEventHandlers=function(){this.resizeHandler=this.resizeHandler.bind(this),this.keydownHandler=this.keydownHandler.bind(this),this.viewChangeHandler=this.viewChangeHandler.bind(this),this.beforeunloadHandler=this.beforeunloadHandler.bind(this),this.resizeWatcher.onResize(this.resizeHandler),this.events.onViewChange(this.viewChangeHandler),addEventListener("keydown",this.keydownHandler),addEventListener("beforeunload",this.beforeunloadHandler)},e.prototype.resizeHandler=function(t){this.width=t.x,this.height=t.y,this.events.dispatchResize()},e.prototype.keydownHandler=function(t){this.events.dispatchKeydown(t)},e.prototype.viewChangeHandler=function(){var t;null===(t=this.views.top())||void 0===t||t.focus()},e.prototype.beforeunloadHandler=function(){this.url.update()},e.prototype.createSplashScreen=function(){return E(this,void 0,void 0,(function(){var t,e,n=this;return C(this,(function(r){switch(r.label){case 0:return this.splashScreenView?(t=this.splashScreenView,[4,this.views.open(t)]):[2];case 1:return e=r.sent(),s.Z.nextDone().then((function(){e.active&&n.views.close(e)})),[2]}}))}))},e.prototype.restoreState=function(){return E(this,void 0,void 0,(function(){return C(this,(function(t){switch(t.label){case 0:return this.autoRestoreState?[4,this.url.restoreIfShould()]:[2];case 1:return t.sent(),this.url.restored||(this.indexView?this.views.open(this.indexView):this.views.open("")),[2]}}))}))},e}(w.Z);var P=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},_=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const O=function(){function t(){this.styleElm=document.createElement("style"),this.styleElm.type="text/css",this.enabled=!1}return t.prototype.enable=function(t){return P(this,void 0,void 0,(function(){var e;return _(this,(function(n){switch(n.label){case 0:return this.styleElm.innerHTML="",[4,s.Z.loadTextPromise(t)];case 1:return e=n.sent(),this.styleElm.innerHTML=e,this.enabled||document.head.appendChild(this.styleElm),this.enabled=!0,[2]}}))}))},t.prototype.disable=function(){this.enabled&&(document.head.removeChild(this.styleElm),this.enabled=!1)},t}();var R=n(3246),z=n(1951),V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Z=function(t){function e(e){return t.call(this,"where is view: "+e)||this}return V(e,t),e}(R.Z);var j=n(8416),F=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const I=function(t){function e(e){return t.call(this,"where is widget: "+e)||this}return F(e,t),e}(R.Z);var D=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};const M=function(){function t(t){this.map=new Map(t&&t.map((function(t){return"string"==typeof t[0]?[t[0].toLowerCase(),t[1]]:t})))}return t.prototype.get=function(t){var e,n,r=this.map.get(t.toLowerCase());if(r)return r;try{for(var o=D(this.map),i=o.next();!i.done;i=o.next()){var s=A(i.value,2),a=s[0],c=s[1];if(a instanceof RegExp&&a.test(t))return c}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.set=function(t,e){return this.map.set(t.toLowerCase(),e),this},t.prototype.clear=function(){return this.map.clear()},t.prototype.delete=function(t){return this.map.delete(t)},t.prototype.forEach=function(t,e){return this.map.forEach(t)},t.prototype.has=function(t){return this.map.has(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size},enumerable:!1,configurable:!0}),t.prototype[Symbol.iterator]=function(){return this.map[Symbol.iterator]()},t.prototype.entries=function(){return this.map.entries()},t.prototype.keys=function(){return this.map.keys()},t.prototype.values=function(){return this.map.values()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.map[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t}();var B=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},W=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},N=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(){function t(t,e){this.routes=new M(t),this.self=e}return t.prototype.list=function(){return this.routes.keys()},t.prototype.fixViewPath=function(t){return t.toLowerCase()},t.prototype.exists=function(t){try{return void 0!==this.resolveViewOrWidget(t)}catch(t){if(t instanceof R.Z)return!1;throw t}},t.prototype.getView=function(t){return B(this,void 0,void 0,(function(){var e,n;return W(this,(function(r){switch(r.label){case 0:return"function"!=typeof(e=this.resolveViewOrWidget(t))?[3,2]:[4,e()];case 1:if((n=r.sent()).default.prototype instanceof z.Z)return[2,n.default];throw new Z(t);case 2:throw new Z(t);case 3:return[2]}}))}))},t.prototype.getWidget=function(t){return B(this,void 0,void 0,(function(){var e,n;return W(this,(function(r){switch(r.label){case 0:return"function"!=typeof(e=this.resolveViewOrWidget(t))?[3,2]:[4,e()];case 1:if((n=r.sent()).default.prototype instanceof j.Z)return[2,n.default];throw new I(t);case 2:throw new I(t);case 3:return[2]}}))}))},t.prototype.getRouter=function(t){return this.resolveRouter(t)},t.prototype.resolveViewOrWidget=function(t){var e=this.splitPath(t),n=e.pop(),r=this.resolveRouter(e);return 0===n.length?r.self:r.routes.get(n)},t.prototype.resolveRouter=function(e){var n,r,o=this;try{for(var i=N(e),s=i.next();!s.done;s=i.next()){var a=s.value,c=o.routes.get(a);if(!(c instanceof t))throw new R.Z("directory '"+a+"' in '"+e+"'");o=c}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.prototype.splitPath=function(e){return e.split(t.pathSplitter)},t.pathSplitter="/",t}();const G=U;var q=new G([["Browse",function(){return Promise.all([n.e(678),n.e(419),n.e(875)]).then(n.bind(n,4959))}],["Directory",function(){return n.e(832).then(n.bind(n,1832))}],["Info",function(){return Promise.all([n.e(103),n.e(176)]).then(n.bind(n,7176))}],["Search",function(){return Promise.all([n.e(678),n.e(419),n.e(923)]).then(n.bind(n,605))}]]);const K=new G([["project",q],["About",function(){return Promise.all([n.e(331),n.e(170)]).then(n.bind(n,6299))}],["CommandPalette",function(){return n.e(48).then(n.bind(n,48))}],["ErrorView",function(){return n.e(536).then(n.bind(n,4536))}],["FrameView",function(){return n.e(110).then(n.bind(n,5110))}],["ImageView",function(){return n.e(549).then(n.bind(n,1549))}],["Menu",function(){return n.e(612).then(n.bind(n,6612))}],["Overview",function(){return Promise.all([n.e(331),n.e(103),n.e(147)]).then(n.bind(n,3472))}],["ShortURL",function(){return n.e(861).then(n.bind(n,3861))}],["SplashScreen",function(){return n.e(388).then(n.bind(n,5388))}],["Test",function(){return n.e(997).then(n.bind(n,7303))}],["View404",function(){return n.e(557).then(n.bind(n,5557))}],["WidgetView",function(){return n.e(444).then(n.bind(n,5444))}],["Checkbox",function(){return n.e(772).then(n.bind(n,7772))}],["Global",function(){return Promise.resolve().then(n.bind(n,7104))}],["HexagonsBackground",function(){return n.e(55).then(n.bind(n,8055))}],["HexagonsTitle",function(){return Promise.all([n.e(103),n.e(769)]).then(n.bind(n,769))}],["HTMLView",function(){return Promise.all([n.e(331),n.e(170)]).then(n.bind(n,9331))}],["IFrame",function(){return n.e(954).then(n.bind(n,7954))}],["LatestProjects",function(){return Promise.all([n.e(678),n.e(594)]).then(n.bind(n,4329))}],["ProjectCard",function(){return Promise.all([n.e(678),n.e(269)]).then(n.bind(n,6678))}],["ProjectsGrid",function(){return Promise.all([n.e(678),n.e(419),n.e(610)]).then(n.bind(n,7419))}],["RandomQuotes",function(){return n.e(741).then(n.bind(n,1741))}],["Settings",function(){return n.e(308).then(n.bind(n,7308))}],["StickyBar",function(){return n.e(484).then(n.bind(n,484))}],[/^#/,function(){return n.e(861).then(n.bind(n,3861))}]],(function(){return Promise.all([n.e(331),n.e(103),n.e(147)]).then(n.bind(n,3472))}));var J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},X=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Q=function(t){function e(){var e=t.call(this)||this;return e.view404="view404",e.splashScreenView="SplashScreen",e.viewError="ErrorView",e.autoRestoreState=!0,e.title=b.Z.title,e.routes=K,e.globalWidget=new o.default(e),e.siteThemes=new O,b.Z.isMobile?e.mainElm.classList.add(r.Z.mobile):e.mainElm.classList.add(r.Z.notMobile),b.Z.developmentMode&&!b.Z.isMobile||e.loadFonts(),e.updateTheme(),e}return J(e,t),e.prototype.setup=function(){return Y(this,void 0,void 0,(function(){return X(this,(function(e){switch(e.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return e.sent(),this.globalWidget.setup(),this.globalWidget.appendTo(this.mainElm),this.settingsChangeHandler=this.settingsChangeHandler.bind(this),b.Z.onSettingsChanged(this.settingsChangeHandler),[2]}}))}))},e.prototype.destory=function(){return Y(this,void 0,void 0,(function(){return X(this,(function(e){switch(e.label){case 0:return[4,t.prototype.destory.call(this)];case 1:return e.sent(),b.Z.offSettingsChanged(this.settingsChangeHandler),[2]}}))}))},e.prototype.settingsChangeHandler=function(){this.updateTheme()},e.prototype.loadFonts=function(){var t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Share+Tech+Mono&display=swap",document.head.appendChild(t)},e.prototype.updateTheme=function(){b.Z.settings.darkMode?this.siteThemes.enable(b.Z.path.theme.dark):this.siteThemes.disable()},e}(T);i.Z.setup();const $=Q},7584:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(7433);const o=function(){this.darkMode=!1};var i=n(721);var s=n(8987),a=n(6780),c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const u=new(function(){function t(){var t=this;this.title="JaPNaA",this.viewStateSeparator="?",this.path={base:"",img:{hexagon:"assets/img/hexagon.svg",logo:"assets/img/japnaa-logo.svg",hamburger:"assets/img/hamburger.svg",close:"assets/img/close.svg",closeWhite:"assets/img/close-white.svg",upArrow:"assets/img/up-arrow.svg"},theme:{dark:"bundles/darkTheme.css"},view:{overview:"assets/views/overview.html",about:"assets/views/about.html"},thingy:"",repo:{notRelative:!0,thingy:"/Thingy/",thingy_:"/Thingy_",linksIndex:"index.json"},content:"assets/content/",contentIndex:"assets/content/index.json",redirectMap:"assets/content/redirects.txt"},this.hexagons={hexagonsPerLayer:50,layers:4,hexagonsSize:.32,minHexagonSize:.4,layerSizeFactor:.22,positionScaleBias:1,zoomDistance:1.2,fadeInSpeed:.2,parallaxIntensity:.5},this.cssVars={heroTransitionInTime:800,longTextContainerMaxWidth:768,stickyBarHeight:72},this.localStorageSettingsKey="JaPNaASiteSettings",this.settings=new o;var e=(0,s.Z)();this.insertBaseUrl(e,this.path);var n,a,c,u=location.href.match(/^https?:\/\/(((\d+\.){3}\d+)|(localhost)):/);if(u){var l=parseInt(location.port);isNaN(l)||(this.path.thingy=u[0]+(l+1))}else"localhost"!==location.hostname&&(this.path.thingy=location.origin+"/");this.developmentMode=Boolean(u),this.isHandheld=(n=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))),this.isMobile=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(),this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.isEdge=navigator.userAgent.indexOf("Edge/")>0,this.isIE=(a=window.navigator.userAgent).indexOf("MSIE ")>0||a.indexOf("Trident/")>0,this.connectionIsMetered=!!(c=navigator.connection)&&c.saveData,this.serverTimePromise=function(){var t=new XMLHttpRequest;t.open("GET","/ping"),i.Z.addResourceLoading(),t.setRequestHeader("cache-control","no-cache, must-revalidate, post-check=0, pre-check=0"),t.setRequestHeader("cache-control","max-age=0"),t.setRequestHeader("expires","0"),t.setRequestHeader("expires","Tue, 01 Jan 1980 1:00:00 GMT"),t.setRequestHeader("pragma","no-cache");var e=new Promise((function(e,n){t.addEventListener("load",(function(){var r=t.getResponseHeader("Date");r?e(new Date(r)):n("No date in header"),i.Z.addResourceLoaded()})),t.addEventListener("error",(function(){n(),i.Z.addResourceLoaded()}))}));return t.send(),e}(),this.serverTimePromise.then((function(e){return t.serverTime=e})),this.settingsChangeHandlers=new r.Z,this.restoreSettingsFromLocalStorage()}return t.prototype.getServerTime=function(){return this.serverTime?Promise.resolve(this.serverTime):this.serverTimePromise},t.prototype.onSettingsChanged=function(t){this.settingsChangeHandlers.add(t)},t.prototype.offSettingsChanged=function(t){this.settingsChangeHandlers.remove(t)},t.prototype._dispatchSettingsChanged=function(){this.saveSettingsToLocalStorage(),this.settingsChangeHandlers.dispatch()},t.prototype.insertBaseUrl=function(t,e){var n,r,o=Object.keys(e);if(!0!==e.notRelative)try{for(var i=c(o),s=i.next();!s.done;s=i.next()){var u=s.value;"string"==typeof e[u]?e[u]=(0,a.Z)(t,e[u]):"object"==typeof e[u]&&this.insertBaseUrl(t,e[u])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.saveSettingsToLocalStorage=function(){localStorage[this.localStorageSettingsKey]=JSON.stringify(this.settings)},t.prototype.restoreSettingsFromLocalStorage=function(){var t=localStorage[this.localStorageSettingsKey];if(t){var e;try{e=JSON.parse(t)}catch(t){return void console.warn("Error while parsing localstorage; value ignored",t)}this.restoreSettings(this.settings,e)}},t.prototype.restoreSettings=function(t,e){var n,r,o=Object.keys(t);try{for(var i=c(o),s=i.next();!s.done;s=i.next()){var a=s.value;typeof t[a]==typeof e[a]&&("object"!=typeof e[a]?t[a]=e[a]:this.restoreSettings(t[a],e[a]))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t}())},3735:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(721),o=n(7584),i=n(1049),s=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},c=function(t){return this instanceof c?(this.v=t,this):new c(t)},u=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=o[t](e)).value instanceof c?Promise.resolve(n.value.v).then(u,l):h(i[0][2],n)}catch(t){h(i[0][3],t)}var n}function u(t){a("next",t)}function l(t){a("throw",t)}function h(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}},l=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof h?h(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}},h=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};const f=function(){function t(){}return t.setup=function(){},t.getCardByNumber=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o,i,s,c,u,l,p,f,d,y,v,w;return a(this,(function(a){switch(a.label){case 0:return[4,this.getProjectsIndex()];case 1:e=a.sent(),n=Object.keys(e.meta),a.label=2;case 2:a.trys.push([2,7,8,9]),r=h(n),o=r.next(),a.label=3;case 3:return o.done?[3,6]:(i=o.value,s=e.meta[i],t<s[0]||t>s[1]?[3,5]:[4,this.getFileForYear(i)]);case 4:c=a.sent();try{for(v=void 0,u=h(c.data),l=u.next();!l.done;l=u.next())if((p=l.value).head.no===t)return[2,p]}catch(t){v={error:t}}finally{try{l&&!l.done&&(w=u.return)&&w.call(u)}finally{if(v)throw v.error}}a.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return f=a.sent(),d={error:f},[3,9];case 8:try{o&&!o.done&&(y=r.return)&&y.call(r)}finally{if(d)throw d.error}return[7];case 9:return[2,null]}}))}))},t.getCardByYearAndIndex=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.getFileForYear(t)];case 1:return[2,n.sent().data[e]]}}))}))},t.getV2CardBody=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return"string"==typeof t.body?[2,r.Z.loadJSONPromise(o.Z.path.content+t.body)]:[2,t.body]}))}))},t.cardAndLinkGeneratorOldestWithLocation=function(){return u(this,arguments,(function(){var t,e,n,r,o,i,s,u,l,f,d,y,v,w,g,m,b,x,S,k,H,L,E,C,T,P,_;return a(this,(function(a){switch(a.label){case 0:return[4,c(this.getLinksIndex())];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,23,24,25]),e=h(t),n=e.next(),a.label=3;case 3:return n.done?[3,22]:(r=n.value,o=p(r,3),i=o[0],o[1],s=o[2],[4,c(Promise.all([this.getLinksForThingy(s),this.createProjectsMap(i)]))]);case 4:u=p.apply(void 0,[a.sent(),2]),l=u[0],f=u[1],d=this.yieldLinksOrProjectsIfExistsAndDeleteFromMap(l,f,s),a.label=5;case 5:a.trys.push([5,11,12,13]),C=void 0,y=h(d),v=y.next(),a.label=6;case 6:return v.done?[3,10]:(w=v.value,[4,c(w)]);case 7:return[4,a.sent()];case 8:a.sent(),a.label=9;case 9:return v=y.next(),[3,6];case 10:return[3,13];case 11:return g=a.sent(),C={error:g},[3,13];case 12:try{v&&!v.done&&(T=y.return)&&T.call(y)}finally{if(C)throw C.error}return[7];case 13:a.trys.push([13,19,20,21]),P=void 0,m=h(f),b=m.next(),a.label=14;case 14:return b.done?[3,18]:(x=p(b.value,2),x[0],S=x[1],[4,c(S)]);case 15:return[4,a.sent()];case 16:a.sent(),a.label=17;case 17:return b=m.next(),[3,14];case 18:return[3,21];case 19:return k=a.sent(),P={error:k},[3,21];case 20:try{b&&!b.done&&(_=m.return)&&_.call(m)}finally{if(P)throw P.error}return[7];case 21:return n=e.next(),[3,3];case 22:return[3,25];case 23:return H=a.sent(),L={error:H},[3,25];case 24:try{n&&!n.done&&(E=e.return)&&E.call(e)}finally{if(L)throw L.error}return[7];case 25:return[2]}}))}))},t.cardAndLinkGeneratorLatestWithLocation=function(){return u(this,arguments,(function(){var t,e,n,r,o,i,s,u,l,f,d,y,v,w,g,m,b,x,S,k,H,L;return a(this,(function(a){switch(a.label){case 0:return[4,c(this.getLinksIndex())];case 1:t=a.sent(),e=t.length-1,a.label=2;case 2:return e>=0?(n=p(t[e],3),r=n[0],n[1],o=n[2],[4,c(Promise.all([this.getLinksForThingy(o),this.createProjectsMap(r)]))]):[3,21];case 3:i=p.apply(void 0,[a.sent(),2]),s=i[0],u=i[1],l=this.yieldLinksOrProjectsIfExistsAndDeleteFromMap(s,u,o),a.label=4;case 4:a.trys.push([4,10,11,12]),S=void 0,f=h(l),d=f.next(),a.label=5;case 5:return d.done?[3,9]:(y=d.value,[4,c(y)]);case 6:return[4,a.sent()];case 7:a.sent(),a.label=8;case 8:return d=f.next(),[3,5];case 9:return[3,12];case 10:return v=a.sent(),S={error:v},[3,12];case 11:try{d&&!d.done&&(k=f.return)&&k.call(f)}finally{if(S)throw S.error}return[7];case 12:a.trys.push([12,18,19,20]),H=void 0,w=h(u),g=w.next(),a.label=13;case 13:return g.done?[3,17]:(m=p(g.value,2),m[0],b=m[1],[4,c(b)]);case 14:return[4,a.sent()];case 15:a.sent(),a.label=16;case 16:return g=w.next(),[3,13];case 17:return[3,20];case 18:return x=a.sent(),H={error:x},[3,20];case 19:try{g&&!g.done&&(L=w.return)&&L.call(w)}finally{if(H)throw H.error}return[7];case 20:return e--,[3,2];case 21:return[2]}}))}))},t.getLinksForYear=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o,i,s,c,u,l,f,d,y,v,w,g,m;return a(this,(function(a){switch(a.label){case 0:return[4,this.getLinksIndex()];case 1:e=a.sent(),n=[],a.label=2;case 2:a.trys.push([2,7,8,9]),r=h(e),o=r.next(),a.label=3;case 3:return o.done?[3,6]:(i=p(o.value,3),s=i[0],i[1],c=i[2],s!==t?[3,5]:[4,this.getLinksForThingy(c)]);case 4:u=a.sent();try{for(g=void 0,l=h(u),f=l.next();!f.done;f=l.next())d=f.value,n.push(this.linkToProjectLink(c,d))}catch(t){g={error:t}}finally{try{f&&!f.done&&(m=l.return)&&m.call(l)}finally{if(g)throw g.error}}return[3,6];case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return y=a.sent(),v={error:y},[3,9];case 8:try{o&&!o.done&&(w=r.return)&&w.call(r)}finally{if(v)throw v.error}return[7];case 9:return[2,n]}}))}))},t.createProjectsMap=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o,i;return a(this,(function(s){switch(s.label){case 0:e=new Map,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.getFileForYear(t)];case 2:for(n=s.sent(),r=0;r<n.data.length;r++)(o=n.data[r]).head.link&&e.set(o.head.link,{project:o,index:r,year:t});return[3,4];case 3:return i=s.sent(),console.warn(i),[3,4];case 4:return[2,e]}}))}))},t.yieldLinksOrProjectsIfExistsAndDeleteFromMap=function(t,e,n){var r,o,s,c,u,l,f,d,y,v;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,7,8,9]),r=h(t),o=r.next(),a.label=1;case 1:return o.done?[3,6]:(s=o.value,c=p(s,2),c[0],u=c[1],l=n+u,(f=e.get((0,i.Z)(u,n)))?(e.delete(l),[4,f]):[3,3]);case 2:return a.sent(),[3,5];case 3:return[4,this.linkToProjectLink(n,s)];case 4:a.sent(),a.label=5;case 5:return o=r.next(),[3,1];case 6:return[3,9];case 7:return d=a.sent(),y={error:d},[3,9];case 8:try{o&&!o.done&&(v=r.return)&&v.call(r)}finally{if(y)throw y.error}return[7];case 9:return[2]}}))},t.cardGeneratorOldestWithLocation=function(){return u(this,arguments,(function(){var t,e,n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,c(this.getProjectsIndex())];case 1:t=i.sent(),e=t.start,i.label=2;case 2:return e<=t.end?[4,c(this.getFileForYear(e))]:[3,9];case 3:n=i.sent(),r=0,i.label=4;case 4:return r<n.data.length?(o=n.data[r],[4,c({project:o,index:r,year:e})]):[3,8];case 5:return[4,i.sent()];case 6:i.sent(),i.label=7;case 7:return r++,[3,4];case 8:return e++,[3,2];case 9:return[2]}}))}))},t.cardGeneratorLatestWithLocation=function(){return u(this,arguments,(function(){var t,e,n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,c(this.getProjectsIndex())];case 1:t=i.sent(),e=t.end,i.label=2;case 2:return e>=t.start?[4,c(this.getFileForYear(e))]:[3,9];case 3:n=i.sent(),r=n.data.length-1,i.label=4;case 4:return r>=0?(o=n.data[r],[4,c({project:o,index:r,year:e})]):[3,8];case 5:return[4,i.sent()];case 6:i.sent(),i.label=7;case 7:return r--,[3,4];case 8:return e--,[3,2];case 9:return[2]}}))}))},t.cardGeneratorOldest=function(){return u(this,arguments,(function(){var t,e,n,r,o,i,s,u,h;return a(this,(function(a){switch(a.label){case 0:t=this.cardGeneratorOldestWithLocation(),a.label=1;case 1:a.trys.push([1,10,11,16]),e=!0,n=l(t),a.label=2;case 2:return[4,c(n.next())];case 3:if(r=a.sent(),i=r.done)return[3,9];h=r.value,e=!1,a.label=4;case 4:return a.trys.push([4,,7,8]),[4,c(h.project)];case 5:return[4,a.sent()];case 6:return a.sent(),[3,8];case 7:return e=!0,[7];case 8:return[3,2];case 9:return[3,16];case 10:return o=a.sent(),s={error:o},[3,16];case 11:return a.trys.push([11,,14,15]),e||i||!(u=n.return)?[3,13]:[4,c(u.call(n))];case 12:a.sent(),a.label=13;case 13:return[3,15];case 14:if(s)throw s.error;return[7];case 15:return[7];case 16:return[2]}}))}))},t.cardGeneratorLatest=function(){return u(this,arguments,(function(){var t,e,n,r,o,i,s,u,h;return a(this,(function(a){switch(a.label){case 0:t=this.cardGeneratorLatestWithLocation(),a.label=1;case 1:a.trys.push([1,10,11,16]),e=!0,n=l(t),a.label=2;case 2:return[4,c(n.next())];case 3:if(r=a.sent(),i=r.done)return[3,9];h=r.value,e=!1,a.label=4;case 4:return a.trys.push([4,,7,8]),[4,c(h.project)];case 5:return[4,a.sent()];case 6:return a.sent(),[3,8];case 7:return e=!0,[7];case 8:return[3,2];case 9:return[3,16];case 10:return o=a.sent(),s={error:o},[3,16];case 11:return a.trys.push([11,,14,15]),e||i||!(u=n.return)?[3,13]:[4,c(u.call(n))];case 12:a.sent(),a.label=13;case 13:return[3,15];case 14:if(s)throw s.error;return[7];case 15:return[7];case 16:return[2]}}))}))},t.getFileForYear=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(i){switch(i.label){case 0:return[4,this.getProjectsIndex()];case 1:return e=i.sent(),(n=this.getPathForYear(e,t))?[2,new Promise((function(e,i){return r.Z.loadJSON(o.Z.path.content+n).onLoad((function(t){return e(t.data)})).onError((function(){return i(new Error("Failed to load file for year "+t))}))}))]:[2,{formatVersion:"2",data:[]}]}}))}))},t.getProjectsIndex=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){return this.projectsIndex?[2,this.projectsIndex]:this.projectsIndexPromise?[2,this.projectsIndexPromise]:(t=new Promise((function(t){return r.Z.loadJSON(o.Z.path.contentIndex).onLoad((function(e){return t(e.data)}))})),this.projectsIndexPromise=t,[2,t])}))}))},t.getLinksIndex=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){return this.linksIndex?[2,this.linksIndex]:this.linksIndexPromise?[2,this.linksIndexPromise]:(t=new Promise((function(t){return r.Z.loadJSON((0,i.Z)(o.Z.path.repo.thingy+o.Z.path.repo.linksIndex,o.Z.path.thingy)).onLoad((function(e){return t(e.data)}))})),this.linksIndexPromise=t,[2,t])}))}))},t.getLinksForThingy=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e,n){return r.Z.loadJSON((0,i.Z)(t+o.Z.path.repo.linksIndex,o.Z.path.thingy)).onLoad((function(t){return e(t.data)})).onError((function(){return n(new Error("Failed to load links in "+t))}))}))]}))}))},t.getPathForYear=function(t,e){var n;return null===(n=t.meta[e])||void 0===n?void 0:n[2]},t.linkToProjectLink=function(t,e){return{name:e[0],href:(0,i.Z)(t+e[1],o.Z.path.thingy)}},t}()},4443:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(4423),o=n(7433);const i=function(){function t(t){this.resizeHandlers=new o.Z,this.viewChangeHandlers=new o.Z,this.keydownHandlers=new o.Z,this.topViewFullChangeHandlers=new o.Z}return t.prototype.onViewChange=function(t){this.viewChangeHandlers.add(t)},t.prototype.offViewChange=function(t){this.viewChangeHandlers.remove(t)},t.prototype.onTopFullViewChange=function(t){this.topViewFullChangeHandlers.add(t)},t.prototype.offTopFullViewChange=function(t){this.topViewFullChangeHandlers.remove(t)},t.prototype.onResize=function(t){this.resizeHandlers.add(t)},t.prototype.offResize=function(t){this.resizeHandlers.remove(t)},t.prototype.onKeydown=function(t){this.keydownHandlers.add(t)},t.prototype.offKeydown=function(t){this.keydownHandlers.remove(t)},t.prototype.dispatchViewChange=function(){this.viewChangeHandlers.dispatch()},t.prototype.dispatchTopFullViewChange=function(){this.topViewFullChangeHandlers.dispatch()},t.prototype.dispatchResize=function(){this.resizeHandlers.dispatch()},t.prototype.dispatchKeydown=function(t){this.keydownHandlers.dispatch(t)},t}();var s=n(439),a=n(8602);var c=n(3246),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},h=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const p=function(){function t(t,e,n){this.activeViews=[],this.app=t,this.appEvents=e,this.mainElm=n}return t.prototype.top=function(){return this.activeViews[this.activeViews.length-1]},t.prototype.topFull=function(){for(var t=this.activeViews.length-1;t>=0;t--){var e=this.activeViews[t];if(e.isFullPage)return e}},t.prototype.switchAndInit=function(t,e,n){return u(this,void 0,void 0,(function(){var r;return l(this,(function(o){switch(o.label){case 0:return[4,this.createAndSetupViewWithFallbacks(t,e,n)];case 1:return r=o.sent(),this.switch(r.view),[2,r.view]}}))}))},t.prototype.open=function(t,e,n){return u(this,void 0,void 0,(function(){var r;return l(this,(function(o){switch(o.label){case 0:return[4,this.createAndSetupViewWithFallbacks(t,e,n)];case 1:return r=o.sent(),this.add(r.view),[2,r.view]}}))}))},t.prototype.openBehind=function(t,e,n){return u(this,void 0,void 0,(function(){var r;return l(this,(function(o){switch(o.label){case 0:return[4,this.createAndSetupViewWithFallbacks(t,e,n)];case 1:return r=o.sent(),this.addBehind(r.view),[2,r.view]}}))}))},t.prototype.switch=function(t){this.closeAllViews(),this.addBehind(t)},t.prototype.addBehind=function(t){t.appendAtStartTo(this.mainElm),this.activeViews.unshift(t),this.dispatchViewChange()},t.prototype.add=function(t){t.appendTo(this.mainElm),this.activeViews.push(t),this.dispatchViewChange()},t.prototype.closeAllViews=function(){var t,e;try{for(var n=h(this.activeViews),r=n.next();!r.done;r=n.next()){var o=r.value;this.triggerClose(o)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.activeViews.length=0},t.prototype.closeAllViewsExcept=function(t){var e,n;try{for(var r=h(this.activeViews),o=r.next();!o.done;o=r.next()){var i=o.value;i!==t&&this.close(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.close=function(t){var e=this.activeViews.indexOf(t);if(e<0)throw new Error("Attempt to remove view not in activeViews");this.activeViews.splice(e,1),this.triggerClose(t)},t.prototype.getA=function(t){var e=t.toLowerCase();return this.activeViews.find((function(t){return e===t.viewPath}))},t.prototype.getById=function(t){return this.activeViews.find((function(e){return e.id===t}))},t.prototype.createAndSetupViewWithFallbacks=function(t,e,n){return u(this,void 0,void 0,(function(){var r,o,i;return l(this,(function(s){switch(s.label){case 0:return[4,this.createViewWithFallbacks(t,e)];case 1:r=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,6]),n&&!r.isFallback&&n(r.view),[4,r.view.setup()];case 3:return s.sent(),[3,6];case 4:return o=s.sent(),[4,this.createViewCreationErrorView(o,t,e)];case 5:return(i=s.sent()).setup(),[2,{view:i,isFallback:!0}];case 6:return[2,r]}}))}))},t.prototype.createViewWithFallbacks=function(t,e){return u(this,void 0,void 0,(function(){var n,r,o;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,this.createView(t,e)];case 1:return n=i.sent(),r=!1,[3,7];case 2:return o=i.sent(),console.warn(o),r=!0,o instanceof c.Z&&this.app.view404?[4,this.createView(this.app.view404)]:[3,4];case 3:return n=i.sent(),[3,6];case 4:return[4,this.createViewCreationErrorView(o,t,e)];case 5:n=i.sent(),i.label=6;case 6:return[3,7];case 7:return[2,{view:n,isFallback:r}]}}))}))},t.prototype.createView=function(t,e){return u(this,void 0,void 0,(function(){var n,r;return l(this,(function(o){switch(o.label){case 0:return[4,this.app.routes.getView(t)];case 1:return n=o.sent(),r="string"==typeof e||void 0===e?(0,s.Z)(t,e):e,[2,new n(this.app,r)]}}))}))},t.prototype.createViewCreationErrorView=function(t,e,n){return u(this,void 0,void 0,(function(){return l(this,(function(r){switch(r.label){case 0:if(!this.app.viewError)throw t;return[4,this.createView(this.app.viewError,this.generateErrorString(t,e,n))];case 1:return[2,r.sent()]}}))}))},t.prototype.generateErrorString=function(t,e,n){return function(t){return t instanceof Error?t.stack||t.name+": "+t.message:t instanceof a.Z?t.stack:t.toString()}(t)+"\nview: "+e+"\nstate: "+JSON.stringify(n)},t.prototype.triggerClose=function(t){var e=this;t.destory().then((function(){t.removeFrom(e.mainElm)})),this.dispatchViewChange()},t.prototype.dispatchViewChange=function(){this.appEvents.dispatchViewChange(),this.lastFullTopView!==this.topFull()&&this.appEvents.dispatchTopFullViewChange(),this.lastFullTopView=this.topFull()},t}();var f=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const y=function(){function t(t){this.width=innerWidth,this.height=innerHeight,this.parentApp=t,this.mainElm=document.createElement("div"),this.mainElm.classList.add(r.Z.main),this.mainElm.tabIndex=-1,this.events=new i(this),this.views=new p(this,this.events,this.mainElm)}return t.prototype.top=function(){return this.parentApp?this.parentApp.top():this},t.prototype.focus=function(){var t=function(t){for(var e=t;e.parentElement;)e=e.parentElement,t.scrollHeight,t.clientHeight;return null}(this.mainElm);if(t){var e=t.scrollTop,n=t.scrollLeft;this.mainElm.focus({preventScroll:!0}),t.scrollTo(e,n)}},t.prototype.setup=function(){return f(this,void 0,void 0,(function(){return d(this,(function(t){return[2]}))}))},t.prototype.destory=function(){return f(this,void 0,void 0,(function(){return d(this,(function(t){return[2]}))}))},t}()},3246:(t,e,n)=>{n.d(e,{Z:()=>s});var r,o=n(8602),i=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e){return t.call(this,"No route exists: "+e)||this}return i(e,t),e}(o.Z)},721:(t,e,n)=>{n.d(e,{Z:()=>S});var r=n(7433);const o=function(){function t(t){this.hooks=t,this.loaded=!1,this.loadHandlers=new r.Z,this.errorHandlers=new r.Z}return t.prototype.onLoad=function(t){return this.loaded&&!this.error?t(this):this.loadHandlers.add(t),this},t.prototype.onError=function(t){return this.loaded&&this.error?t(this):this.errorHandlers.add(t),this},t.prototype._isStillLoaded=function(){return!0},t.prototype.onLoadHandler=function(){this.loaded=!0,this.dispatchLoadEvent(),this.hooks.onLoad(this)},t.prototype.onErrorHandler=function(t){this.error=t,this.loaded=!0,this.dispathErrorEvent(),this.hooks.onError(this)},t.prototype.dispatchLoadEvent=function(){this.loadHandlers.dispatch(this)},t.prototype.dispathErrorEvent=function(){if(!this.errorHandlers.hasAny()&&this.loadHandlers.hasAny())throw console.error("Throwing resource load error",this),new Error("Unhandled resource load error");console.warn("Failed to load resource",this),this.errorHandlers.dispatch(this)},t}();var i,s=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.data=document.createElement("img"),r.path=n,r.data.src=n,r.data.addEventListener("load",(function(){return r.onLoadHandler()})),r.data.addEventListener("error",(function(t){return r.onErrorHandler(t.error||new Error("Failed to load image"))})),r}return s(e,t),e.prototype._isStillLoaded=function(){return this.data.complete},e.prototype.copyImage=function(){return this.data.cloneNode()},e}(o);const c=function(t,e){this.onLoad=t,this.onError=e};var u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const l=function(t){function e(){return t.call(this)||this}return u(e,t),e.prototype.dispatch=function(t){for(var e;e=this.handlers.shift();)e(t)},e}(r.Z);var h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const p=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.path=n,o.__debugFlag=r,o.req=o.getText(n),o}return h(e,t),e.prototype.getText=function(t){var e=this,n=new XMLHttpRequest;return n.open("GET",t),n.responseType="text",n.addEventListener("load",(function(){e.data=n.responseText,n.status>=400?e.onErrorHandler(new Error("Failed to load "+e.path+": "+n.status+" ("+n.statusText+")")):e.onLoadHandler()})),n.addEventListener("error",(function(){e.onErrorHandler(new Error("Failed to load "+e.path+", not connected to internet?"))})),this.__debugFlag||n.send(),n},e}(o);var f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const d=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.path=n,r||o.getJSON(n),o}return f(e,t),e.prototype.getJSON=function(t){var e=this,n=new XMLHttpRequest;n.open("GET",t),n.responseType="text",n.addEventListener("load",(function(){if(n.status>=400)e.onErrorHandler(new Error("Failed to load "+e.path+": "+n.status+" ("+n.statusText+")"));else{try{e.data=JSON.parse(n.responseText)}catch(t){return void e.onErrorHandler(t)}e.onLoadHandler()}})),n.addEventListener("error",(function(){e.onErrorHandler(new Error("Failed to load "+e.path+", not connected to internet?"))})),n.send()},e}(o);var y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const v=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.path=n,o.type=r||"text/xml",o.getXML(n),o}return y(e,t),e.prototype.getXML=function(t){var e=this,n=new XMLHttpRequest;n.open("GET",t),n.responseType="text",n.addEventListener("load",(function(){if(n.status>=400)e.onErrorHandler(new Error("Failed to load "+e.path+": "+n.status+" ("+n.statusText+")"));else{var t=new DOMParser;try{e.data=t.parseFromString(n.responseText,e.type)}catch(t){e.onErrorHandler(t)}e.onLoadHandler()}})),n.addEventListener("error",(function(){e.onErrorHandler(new Error("Failed to load "+e.path+", not connected to internet?"))})),n.send()},e}(o);var w=n(2181),g=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},b=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},x=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};const S=new(function(){function t(){this.toBeLoaded=0,this.loaded=0,this.resources=new Map,this.hooks=new c(this.onLoadHandler.bind(this),this.onErrorHandler.bind(this)),this.newResourceHandlers=new r.Z,this.doneHandlers=new r.Z,this.doneEventOnceHandlers=new l,this.progressChangeHandlers=new r.Z}return t.prototype.getResource=function(t){return this.resources.get(t)},t.prototype.getProgress=function(){return{total:this.toBeLoaded,loaded:this.loaded,num:this.loaded/this.toBeLoaded}},t.prototype.onNewResource=function(t){this.newResourceHandlers.add(t)},t.prototype.offNewResource=function(t){this.newResourceHandlers.remove(t)},t.prototype.isDone=function(){return this.toBeLoaded<=this.loaded},t.prototype.onDone=function(t){this.doneHandlers.add(t)},t.prototype.offDone=function(t){this.doneHandlers.remove(t)},t.prototype.nextIdle=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,(0,w.Z)(50)];case 1:return t.sent(),this.isDone()?[3,5]:[3,2];case 2:return[4,this.nextDone()];case 3:t.sent(),t.label=4;case 4:return[3,0];case 5:return[2]}}))}))},t.prototype.nextDone=function(){return g(this,void 0,void 0,(function(){var t=this;return m(this,(function(e){switch(e.label){case 0:return this.isDone()?[3,2]:[4,new Promise((function(e){return t.doneEventOnceHandlers.add((function(){return e()}))}))];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.onDoneOnce=function(t){this.doneEventOnceHandlers.add(t)},t.prototype.onProgressChange=function(t){this.progressChangeHandlers.add(t)},t.prototype.offProgressChange=function(t){this.progressChangeHandlers.remove(t)},t.prototype.loadImage=function(t){return this.loadResource(t,a)},t.prototype.loadText=function(t){return this.loadResource(t,p)},t.prototype.loadJSON=function(t){return this.loadResource(t,d)},t.prototype.loadXML=function(t,e){return this.loadResource(t,v,e)},t.prototype.loadImagePromise=function(t){return this.promisify(this.loadResource(t,a))},t.prototype.loadTextPromise=function(t){return this.promisify(this.loadResource(t,p))},t.prototype.loadJSONPromise=function(t){return this.promisify(this.loadResource(t,d))},t.prototype.loadXMLPromise=function(t,e){return this.promisify(this.loadResource(t,v,e))},t.prototype.addResourceLoading=function(){this.toBeLoaded++,this.newResourceHandlers.dispatch(void 0),this.progressChangeHandlers.dispatch()},t.prototype.addResourceLoaded=function(){this.onLoadHandler()},t.prototype.deleteResource=function(t){return!!this.resources.has(t)&&(this.resources.delete(t),!0)},t.prototype.__debug_setResource=function(t,e){this.resources.set(t,e)},t.prototype.__debug_getHooks=function(){return this.hooks},t.prototype.promisify=function(t){return new Promise((function(e,n){t.onLoad((function(t){e(t.data)})),t.onError((function(t){n(t.error)}))}))},t.prototype.loadResource=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this.resources.get(t);if(o)return o;var i=new(e.bind.apply(e,x([void 0,this.hooks,t],b(n),!1)));return this.resources.set(t,i),this.toBeLoaded++,this.newResourceHandlers.dispatch(i),this.progressChangeHandlers.dispatch(),i},t.prototype.onLoadHandler=function(){this.loaded++,this.checkDone()},t.prototype.onErrorHandler=function(){this.loaded++,this.checkDone()},t.prototype.checkDone=function(){this.progressChangeHandlers.dispatch(),this.isDone()&&this.onDoneHandler()},t.prototype.onDoneHandler=function(){this.doneHandlers.dispatch(),this.doneEventOnceHandlers.dispatch()},t}())},8602:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(){function t(t){this.internalErrorObj=new Error(t),this.name=this.internalErrorObj.name,this.message=this.internalErrorObj.message,this.stack=this.internalErrorObj.stack||this.message}return t.prototype.toString=function(){return this.name+": "+this.message},t}()},439:(t,e,n)=>{function r(t,e,n){return{viewPath:t,stateData:e,directURL:n}}n.d(e,{Z:()=>r})},7433:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(){function t(){this.handlers=[]}return t.prototype.add=function(t){this.handlers.push(t)},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);if(e<0)throw new Error("Removing handler that doesn't exist");this.handlers.splice(e,1)},t.prototype.dispatch=function(t){for(var e=this.handlers.length-1;e>=0;e--)this.handlers[e](t)},t.prototype.hasAny=function(){return this.handlers.length>0},t}()},5630:(t,e,n)=>{n.d(e,{Z:()=>i});const r=function(){function t(){}return t.prototype.build=function(){if(void 0===this.viewPath&&void 0===this.hash)throw new Error("Missing viewName");var t=this.viewPath,e=this.stateData;return void 0===this.viewPath&&this.hash?t=this.hash:this.hash&&(e?e+=this.hash:e=this.hash),{viewPath:t,stateData:e,directURL:this.directURL,id:this.id}},t}();var o=n(7584);function i(t){var e,n=new r;if(e="string"==typeof t?new URL(t):t,n.hash=e.hash,e.pathname){var i=e.pathname.slice(1)+(e.search||"")||e.hash||"",s=i.indexOf(o.Z.viewStateSeparator);if(s<0)n.viewPath=i;else{var a=i.slice(0,s),c=decodeURIComponent(i.slice(s+1));n.viewPath=a,n.stateData=c}try{return n.build()}catch(t){return}}}},1951:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(4423),o=n(7433),i=n(7584),s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const a=function(){function t(t){this.events=t,this.viewChangeHandlers=[],this.topViewChangeHandler=[],this.resizeHandlers=[],this.keydownHandlers=[],this.settingsChangeHandlers=[]}return t.prototype.destory=function(){var t,e,n,r,o,a,c,u,l,h;try{for(var p=s(this.viewChangeHandlers),f=p.next();!f.done;f=p.next()){var d=f.value;this.events.offViewChange(d)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=p.return)&&e.call(p)}finally{if(t)throw t.error}}try{for(var y=s(this.topViewChangeHandler),v=y.next();!v.done;v=y.next()){d=v.value;this.events.offTopFullViewChange(d)}}catch(t){n={error:t}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}try{for(var w=s(this.resizeHandlers),g=w.next();!g.done;g=w.next()){d=g.value;this.events.offResize(d)}}catch(t){o={error:t}}finally{try{g&&!g.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}try{for(var m=s(this.keydownHandlers),b=m.next();!b.done;b=m.next()){d=b.value;this.events.offKeydown(d)}}catch(t){c={error:t}}finally{try{b&&!b.done&&(u=m.return)&&u.call(m)}finally{if(c)throw c.error}}try{for(var x=s(this.settingsChangeHandlers),S=x.next();!S.done;S=x.next()){d=S.value;i.Z.offSettingsChanged(d)}}catch(t){l={error:t}}finally{try{S&&!S.done&&(h=x.return)&&h.call(x)}finally{if(l)throw l.error}}},t.prototype.onViewChange=function(t){this.events.onViewChange(t),this.viewChangeHandlers.push(t)},t.prototype.offViewChange=function(t){this.events.offViewChange(t),this.viewChangeHandlers.splice(this.viewChangeHandlers.indexOf(t),1)},t.prototype.onTopFullViewChange=function(t){this.events.onTopFullViewChange(t)},t.prototype.offTopFullViewChange=function(t){this.events.offTopFullViewChange(t),this.topViewChangeHandler.splice(this.topViewChangeHandler.indexOf(t),1)},t.prototype.onResize=function(t){this.events.onResize(t),this.resizeHandlers.push(t)},t.prototype.offResize=function(t){this.events.offResize(t),this.resizeHandlers.splice(this.viewChangeHandlers.indexOf(t),1)},t.prototype.onKeydown=function(t){this.events.onKeydown(t),this.keydownHandlers.push(t)},t.prototype.offKeydown=function(t){this.events.offKeydown(t),this.keydownHandlers.splice(this.keydownHandlers.indexOf(t),1)},t.prototype.onSettingsChange=function(t){i.Z.onSettingsChanged(t),this.settingsChangeHandlers.push(t)},t.prototype.offSettingsChange=function(t){i.Z.offSettingsChanged(t),this.settingsChangeHandlers.splice(this.settingsChangeHandlers.indexOf(t),1)},t}();var c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const h=function(){function t(e,n){this.isFullPage=!1,this.showMenuButton=!0,this.app=e,this.events=new a(e.events),this.destoryHandlers=new o.Z,this.viewPath=this.app.routes.fixViewPath(n.viewPath),this.id=n.id||t.vidCounter++,this.active=!1,this.privateData=n.privateData||{},this.viewComponents=[]}return t.prototype.setup=function(){var t,e;this.elm.classList.add(r.Z.view),this.elm.classList.add(this.cssName),this.elm.tabIndex=-1,this.isFullPage&&this.app.url.pushHistory(this);try{for(var n=l(this.viewComponents),o=n.next();!o.done;o=n.next()){o.value.setup()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.app.focus(),this.active=!0},t.prototype.destory=function(){return c(this,void 0,void 0,(function(){var t,e,n,r;return u(this,(function(o){this.destoryHandlers.dispatch(),this.events.destory();try{for(t=l(this.viewComponents),e=t.next();!e.done;e=t.next())e.value.destory()}catch(t){n={error:t}}finally{try{e&&!e.done&&(r=t.return)&&r.call(t)}finally{if(n)throw n.error}}return this.active=!1,[2]}))}))},t.prototype.focus=function(){this.elm.focus()},t.prototype.appendTo=function(t){t.appendChild(this.elm)},t.prototype.appendAtStartTo=function(t){t.insertBefore(this.elm,t.firstChild)},t.prototype.removeFrom=function(t){t.removeChild(this.elm)},t.prototype.canScroll=function(){return this.elm.scrollHeight>this.elm.clientHeight},t.prototype.getTitle=function(){},t.prototype.getState=function(){},t.prototype.setState=function(t){return!1},t.prototype.getPrivateData=function(){var t,e;try{for(var n=l(this.viewComponents),r=n.next();!r.done;r=n.next()){r.value.updatePrivateData()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return this.privateData},t.prototype.onDestory=function(t){this.destoryHandlers.add(t)},t.prototype.offDestory=function(t){this.destoryHandlers.remove(t)},t.prototype.updateState=function(){this.app.url.update()},t.vidCounter=0,t}()},8416:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(4423);const o=function(){function t(){}return t.prototype.setup=function(){var t=this.cssName||this.constructor.name;this.elm.classList.add(r.Z.widget),this.elm.classList.add(t),this.cssName=t},t.prototype.destory=function(){},t.prototype.appendTo=function(t){this.parent=t,t.appendChild(this.elm)},t.prototype.canScroll=function(){return this.elm.scrollHeight>this.elm.clientHeight},t}()},7104:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});const r="GlobalWidgets__sTmaJglobal";var o=n(8416);const i="MenuButton__XpYuhmenuButton",s="scrollBarExists__j4bU3menuButton",a="hidden__X4INvmenuButton";var c,u=n(721),l=n(7584),h=n(1049),p=n(7105),f=(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},c(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const d=function(t){function e(e){var n=t.call(this)||this;return n.cssName=i,n.app=e,n.elm=document.createElement("div"),n.anchor=document.createElement("a"),n.isLoadingMenu=!1,n}return f(e,t),e.prototype.setup=function(){t.prototype.setup.call(this);var e=u.Z.loadImage(l.Z.path.img.hamburger).copyImage();e.alt="Menu icon",this.anchor.appendChild(e),this.anchor.title="Menu (Esc)",this.anchor.href=(0,h.Z)("/menu"),this.elm.appendChild(this.anchor),this.addEventHandlers()},e.prototype.destory=function(){t.prototype.destory.call(this),this.removeEventHandlers()},e.prototype.addEventHandlers=function(){var t=this;this.viewChangeHandler=this.viewChangeHandler.bind(this),this.keydownHandler=this.keydownHandler.bind(this),this.app.events.onViewChange(this.viewChangeHandler),this.app.events.onResize(this.viewChangeHandler),this.app.events.onKeydown(this.keydownHandler),u.Z.onDone(this.viewChangeHandler),this.anchor.addEventListener("click",(function(e){(0,p.Z)(e)||(e.preventDefault(),t.toggleMenu())}))},e.prototype.removeEventHandlers=function(){this.app.events.offViewChange(this.viewChangeHandler),this.app.events.offResize(this.viewChangeHandler),this.app.events.offKeydown(this.keydownHandler),u.Z.offDone(this.viewChangeHandler)},e.prototype.viewChangeHandler=function(){this.updateState()},e.prototype.keydownHandler=function(t){t.cancelBubble||27===t.keyCode&&this.toggleMenu()},e.prototype.updateState=function(){var t=this.app.views.top();t?(t.canScroll()&&!l.Z.isMobile?this.elm.classList.add(e.scrollBarExistsClass):this.elm.classList.remove(e.scrollBarExistsClass),t.showMenuButton?this.elm.classList.remove(e.hiddenClass):this.elm.classList.add(e.hiddenClass)):(this.elm.classList.remove(e.scrollBarExistsClass),this.elm.classList.remove(e.hiddenClass))},e.prototype.toggleMenu=function(){if(!this.isLoadingMenu){var t=this.app.views.getA("Menu");t?this.app.views.close(t):(this.isLoadingMenu=!0,this.app.views.open("Menu").then((function(t){return t.animateTransitionIn()})),this.isLoadingMenu=!1)}},e.hiddenClass=a,e.scrollBarExistsClass=s,e}(o.Z),y="TopLoadingBar__ptA4floadingBar",v="loading__K7Xw_loadingBar",w="done__bIuQsloadingBar";var g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const m=function(t){function e(e){var n=t.call(this)||this;return n.cssName=y,n.app=e,n.elm=document.createElement("div"),n.lastDoneLoaded=0,n.lastProgress=0,n.markDoneTimeout=-1,n.markLoadingTimeout=-1,n}return g(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.addEventHandlers()},e.prototype.destory=function(){t.prototype.destory.call(this)},e.prototype.addEventHandlers=function(){var t=this;u.Z.onProgressChange((function(){t.setProgress(u.Z.getProgress())}))},e.prototype.setProgress=function(t){var n=t.loaded-this.lastDoneLoaded,r=t.total-this.lastDoneLoaded,o=n/r,i=n/(r+3);i>=this.lastProgress&&(this.elm.style.width=e.minBarLength+i*(100-e.minBarLength)+"%",this.lastProgress=i),o<1?this.waitThenMarkLoading():this.waitThenMarkDone()},e.prototype.waitThenMarkLoading=function(){this.cancelMarkDone(),this.markLoadingTimeout<0&&(this.markLoadingTimeout=window.setTimeout(this.markLoading.bind(this),e.timeToWaitBeforeSetLoading))},e.prototype.waitThenMarkDone=function(){this.cancelMarkDone(),this.cancelMarkLoading(),this.markDoneTimeout=window.setTimeout(this.markDone.bind(this),e.timeToIdle)},e.prototype.markLoading=function(){this.elm.classList.remove(w),this.elm.classList.add(v)},e.prototype.markDone=function(){var t=this;this.elm.style.width="100%",this.lastProgress=0,requestAnimationFrame((function(){return requestAnimationFrame((function(){t.elm.classList.add(w),window.setTimeout((function(){t.elm.classList.remove(v),t.elm.style.width="0",t.lastDoneLoaded=u.Z.getProgress().loaded}),e.transitionSpeed)}))}))},e.prototype.cancelMarkDone=function(){clearTimeout(this.markDoneTimeout),this.markDoneTimeout=-1},e.prototype.cancelMarkLoading=function(){clearTimeout(this.markLoadingTimeout),this.markLoadingTimeout=-1},e.transitionSpeed=500,e.timeToIdle=100,e.timeToWaitBeforeSetLoading=25,e.minBarLength=17,e}(o.Z);const b=function(){function t(t){var e=this;this.bindings={191:function(){return e.openIfNot("CommandPalette","/")},80:function(){return e.openIfNot("CommandPalette")}},this.shiftBindings={51:function(){return e.openIfNot("CommandPalette","#")}},this.app=t}return t.prototype.setup=function(){this.keydownHandler=this.keydownHandler.bind(this),this.app.events.onKeydown(this.keydownHandler)},t.prototype.destory=function(){this.app.events.offKeydown(this.keydownHandler)},t.prototype.keydownHandler=function(t){var e;t.cancelBubble||(t.target instanceof HTMLElement&&"INPUT"===t.target.tagName||(t.shiftKey?(e=this.shiftBindings[t.keyCode])&&e():(e=this.bindings[t.keyCode])&&e()))},t.prototype.openIfNot=function(t,e,n){this.app.views.getA(t)||this.app.views.open(t,e,n)},t}();var x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const S=function(t){function e(e){var n=t.call(this)||this;return n.cssName=r,n.app=e,n.globalKeybindings=new b(e),n.menuButton=new d(e),n.loadingBar=new m(e),n.elm=document.createElement("div"),n}return x(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.globalKeybindings.setup(),this.menuButton.setup(),this.loadingBar.setup(),this.menuButton.appendTo(this.elm),this.loadingBar.appendTo(this.elm)},e.prototype.destory=function(){t.prototype.destory.call(this),this.globalKeybindings.setup(),this.menuButton.destory(),this.loadingBar.destory()},e}(o.Z)},1531:(t,e,n)=>{function r(t,e){return{x:t||0,y:e||0}}n.d(e,{J:()=>r})},7105:(t,e,n)=>{function r(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey}n.d(e,{Z:()=>r})},1049:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(7584),o=n(6780);function i(t,e){return/^(?:[a-z]+:)?\/\//.test(t)?t:(0,o.Z)(e||r.Z.path.base,t)}},6780:(t,e,n)=>{function r(t,e){var n=new URL(e,new URL(t,"resolve:/"));return"resolve:"===n.protocol?n.pathname+n.search+n.hash:n.toString()}n.d(e,{Z:()=>r})},5034:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(1049),o=n(7584);function i(t){var e=t.viewPath;return t.stateData&&(e+=o.Z.viewStateSeparator+encodeURIComponent(t.stateData)),(0,r.Z)(e)}},2181:(t,e,n)=>{function r(t){return new Promise((function(e){setTimeout(e,t)}))}n.d(e,{Z:()=>r})}}]);