"use strict";(self.webpackChunkjapnaa_github_io=self.webpackChunkjapnaa_github_io||[]).push([[331],{7815:(t,e,n)=>{function r(t){var e=open(t,"_blank");return e&&(e.opener=null),e}n.d(e,{Z:()=>r})},9331:(t,e,n)=>{n.r(e),n.d(e,{default:()=>I});const r="HTMLView__kOgURHTMLView",o="loadError__O_EfGHTMLView";var i=n(8416);const a="htmlParsed__xJRLYhtmlViewDocument",s="scriptErrorWarning__tyq8AhtmlViewDocument",l="embededView__bfqWNhtmlViewDocument",u="embededWidget__HIkZOhtmlViewDocument",c="loaded__KGDoIhtmlViewDocument",p="embededApp__bc5gzembededApp";const h=function(){function t(){}return t.prototype.pushHistory=function(){},t.prototype.updateViewIfIsCurrent=function(){},t.prototype.update=function(){},t}();var f,d=n(4443),y=(f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},f(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const w=function(t){function e(e,n){var r=t.call(this,e)||this;return r.title="embededApp",r.parentApp=e,r.parentElm=n,r.routes=e.routes,r.mainElm.classList.add(p),r.url=new h,r}return y(e,t),e.prototype.setup=function(){return v(this,void 0,void 0,(function(){return m(this,(function(e){return t.prototype.setup.call(this),this.addEventHandlers(),this.parentElm.appendChild(this.mainElm),this.resizeNextFrame(),[2]}))}))},e.prototype.destory=function(){return v(this,void 0,void 0,(function(){return m(this,(function(t){return this.parentApp.events.offResize(this.resizeHandler),[2]}))}))},e.prototype.addEventHandlers=function(){this.resizeHandler=this.resizeHandler.bind(this),this.parentApp.events.onResize(this.resizeHandler),this.mainElm.addEventListener("keydown",this.keydownHandler.bind(this)),this.mainElm.addEventListener("mouseover",this.mouseoverHandler.bind(this))},e.prototype.resizeNextFrame=function(){var t=this;requestAnimationFrame((function(){return t.resizeHandler()}))},e.prototype.resizeHandler=function(){this.width=this.mainElm.clientWidth,this.height=this.mainElm.clientHeight,this.events.dispatchResize()},e.prototype.keydownHandler=function(t){t.stopPropagation(),this.events.dispatchKeydown(t)},e.prototype.mouseoverHandler=function(){this.focus()},e}(d.Z);function b(t){return[].slice.call(t)}var g=n(7275),E=n(7815),k=n(5630),x=n(9707),_=n(1049),H=n(7584),L=n(7105),S=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},A=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},T=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},W=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},O=function(){function t(t,e){this.app=t,this.hasErrors=!1,this.embededApps=[],this.widgets=[],this.styleElms=[],this.elm=this.parseHTML(e),this.elm.classList.add(a)}return t.prototype.appendTo=function(t){t.appendChild(this.elm)},t.prototype.ready=function(){return this.replaceElementsPromise?this.replaceElementsPromise:Promise.resolve()},t.prototype.destory=function(){return S(this,void 0,void 0,(function(){var t,e,n,r,o,i,a,s,l,u,c,p,h,f,d;return A(this,(function(y){switch(y.label){case 0:t=[];try{for(e=T(this.embededApps),n=e.next();!n.done;n=e.next())r=n.value,t.push(r.destory())}catch(t){u={error:t}}finally{try{n&&!n.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}try{for(o=T(this.widgets),i=o.next();!i.done;i=o.next())i.value.destory()}catch(t){p={error:t}}finally{try{i&&!i.done&&(h=o.return)&&h.call(o)}finally{if(p)throw p.error}}try{for(a=T(this.styleElms),s=a.next();!s.done;s=a.next())l=s.value,document.head.removeChild(l)}catch(t){f={error:t}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(f)throw f.error}}return[4,Promise.all(t)];case 1:return y.sent(),[2]}}))}))},t.prototype.runScripts=function(){for(var t=this.elm.getElementsByTagName("script"),e=this.getElementIdMap(),n=0;n<t.length;n++){var r=t[n];try{new Function("div","id","SiteConfig",r.innerHTML)(this.elm,e,H.Z)}catch(t){console.error(t),this.hasErrors=!0}}this.hasErrors&&this.createScriptErrorWarning()},t.prototype.moveStyleElementsToHead=function(){var t,e,n=b(this.elm.getElementsByTagName("style"));try{for(var r=T(n),o=r.next();!o.done;o=r.next()){var i=o.value;document.head.appendChild(i),this.styleElms.push(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setLinkHandlingMethod=function(t){var e=this;this.linkHandlingOptions=t;for(var n=this.elm.getElementsByTagName("a"),r=function(t){var r=n[t],o=r.getAttribute("href");if(!o)return"continue";r.href=(0,_.Z)(o),r.addEventListener("click",(function(t){return e.anchorClickHandler(r,t)}))},o=0;o<n.length;o++)r(o)},t.prototype.replaceElements=function(){for(var t=this.elm.getElementsByTagName("*"),e="view:",n="widget:",r=[],o=0;o<t.length;o++){var i=t[o],a=i.tagName.toLowerCase();if(a.startsWith("japnaa:")){var s=a.slice("japnaa:".length);s.startsWith(e)?r.push(this.replaceViewElement(i,s.slice(e.length))):s.startsWith(n)&&r.push(this.replaceWidgetElement(i,s.slice(n.length)))}}this.replaceElementsPromise=Promise.all(r)},t.prototype.createScriptErrorWarning=function(){var t=document.createElement("div");t.classList.add(s),t.innerText="Some scripts failed to run. Expect limited functionality.",this.elm.insertBefore(t,this.elm.firstChild)},t.prototype.anchorClickHandler=function(t,e){if(e.cancelable&&this.linkHandlingOptions&&!(0,L.Z)(e)&&"_blank"!==t.target){e.preventDefault();var n=t.href,r=new URL(n);if(r.host===location.host){var o=(0,k.Z)(r);if(o)this.linkHandlingOptions.openViewsWithLinks&&this.app.routes.exists(o.viewPath)?this.app.views.switchAndInit(o.viewPath,o):this.openLink(n);else this.openLink(n)}else this.linkHandlingOptions.dontLeavePage?(0,E.Z)(n):location.assign(n)}},t.prototype.openLink=function(t){this.linkHandlingOptions&&(this.linkHandlingOptions.dontLeavePage?(0,g.Z)(t):location.assign(t))},t.prototype.parseHTML=function(t){var e=document.createElement("div");return e.innerHTML=t,e},t.prototype.getElementIdMap=function(){for(var t=this.elm.querySelectorAll("[id]"),e=new Map,n=0;n<t.length;n++){var r=t[n];e.set(r.id,r)}return e},t.prototype.replaceViewElement=function(t,e){return S(this,void 0,void 0,(function(){var n,r;return A(this,(function(o){return t.classList.add(l),n=new w(this.app,t),r=t.getAttribute("statedata"),n.setup(),n.views.open(e,r||void 0),t.classList.add(c),this.embededApps.push(n),[2]}))}))},t.prototype.replaceWidgetElement=function(t,e){return S(this,void 0,void 0,(function(){var n,r;return A(this,(function(o){switch(o.label){case 0:return t.classList.add(u),[4,this.app.routes.getWidget(e)];case 1:return n=o.sent(),(r=new(n.bind.apply(n,W([void 0],P(this.getWidgetArguments(t)),!1)))).appendTo(t),r.setup(),this.widgets.push(r),t.classList.add(c),[2]}}))}))},t.prototype.getWidgetArguments=function(t){var e,n,r=t.getAttribute("args"),o=t.getAttribute("app-arg"),i=t.getAttribute("children-arg"),a=[];if(null!==o&&a.push(this.app),null!==i&&(a.push(b(t.children)),(0,x.Z)(t)),!r)return a;try{var s=JSON.parse("["+r+"]");try{for(var l=T(s),u=l.next();!u.done;u=l.next()){var c=u.value;a.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return a}catch(t){return a.push(r),a}},t}();const C=O;const V=function(){function t(t,e){void 0===e&&(e={}),this.app=t,this.options=e}return t.prototype.parse=function(t){var e=t;this.options.inlineJS&&(e=this.runInlineJS(e));var n=new C(this.app,e);return this.options.scripts&&n.runScripts(),n.moveStyleElementsToHead(),n.setLinkHandlingMethod(this.options),n.replaceElements(),n},t.prototype.runInlineJS=function(e){return e.replace(t.inlineJSMatcher,(function(t,e){var n;try{n=new Function(e)()}catch(t){console.error(t),n="[Inline JS Error]"}return void 0===n?"":n.toString()}))},t.inlineJSMatcher=/\${{([^]+?)}}/g,t}();var M=n(721);const Z={inlineJS:!0,scripts:!0,dontLeavePage:!0,openViewsWithLinks:!0,openFrameViewWithLinks:!1};var z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},N=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const I=function(t){function e(e,n){var o=t.call(this)||this;return o.cssName=r,o.parser=new V(e,n||Z),o.elm=document.createElement("div"),o}return z(e,t),e.prototype.setUrl=function(t){this.url=t},e.prototype.setSource=function(t){this.source=t},e.prototype.setup=function(){return j(this,void 0,void 0,(function(){var e,n=this;return N(this,(function(r){switch(r.label){case 0:if(t.prototype.setup.call(this),this.source)e=this.write(this.source);else{if(!this.url)throw new Error("A url or source was not given");e=this.loadAndWriteWithURL(this.url)}return e.catch((function(t){return n.writeError(t)})),[4,e];case 1:return r.sent(),[2]}}))}))},e.prototype.destory=function(){return j(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return t.prototype.destory.call(this),this.doc?[4,this.doc.destory()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.loadAndWriteWithURL=function(t){return j(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return[4,M.Z.loadTextPromise(t)];case 1:return e=n.sent(),[4,this.write(e)];case 2:return n.sent(),[2]}}))}))},e.prototype.write=function(t){return j(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return this.doc=this.parser.parse(t),this.doc.appendTo(this.elm),[4,this.doc.ready()];case 1:return e.sent(),[2]}}))}))},e.prototype.writeError=function(t){console.error(t),this.elm.classList.add(o),this.elm.appendChild(document.createTextNode("Failed to load. Reason: "+t.message))},e}(i.Z)},7275:(t,e,n)=>{n.d(e,{Z:()=>i});var r=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function i(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){return(e=open(t,"_blank"))?(e.opener=null,[2]):(console.warn("Window could not be opened"),location.assign(t),[2])}))}))}},9707:(t,e,n)=>{function r(t){for(;t.firstChild;)t.removeChild(t.firstChild)}n.d(e,{Z:()=>r})}}]);